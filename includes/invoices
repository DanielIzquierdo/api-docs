<h1 id="facturas">Facturas</h1>

<h2 id="emisi-n-de-una-factura">Emisión de una factura</h2>

<h3 id="operaci-n">Operación</h3>

<p><code class="prettyprint">POST /invoices/issue</code></p>

<h3 id="requerimiento">Requerimiento</h3>

<blockquote>
<h4 id="requerimiento-de-ejemplo">Requerimiento de ejemplo</h4>
</blockquote>
<pre class="highlight shell"><code>curl -v https://link.datil.co/invoices/issue <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{
  "ambiente":1,
  "tipo_emision":1,
  "secuencial":148,
  "fecha_emision":"2015-02-28T11:28:56.782Z",
  "emisor":{
    "ruc":"0910000000001",
    "obligado_contabilidad":true,
    "contribuyente_especial":"12345",
    "nombre_comercial":"XYZ Corp",
    "razon_social":"XYZ Corporación S.A.",
    "direccion":"Av. Primera 234 y calle 5ta",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Av. Primera 234 y calle 5ta"
    }
  },
  "moneda":"USD",
  "informacion_adicional":{
    "Tiempo de entrega":"5 días"
  },
  "totales":{
    "total_sin_impuestos":4359.54,
    "impuestos":[
      {
        "base_imponible":0.0,
        "valor":0.0,
        "codigo":"2",
        "codigo_porcentaje":"0"
      },
      {
        "base_imponible":4359.54,
        "valor":523.14,
        "codigo":"2",
        "codigo_porcentaje":"2"
      }
    ],
    "importe_total":4882.68,
    "propina":0.0,
    "descuento":0.0
  },
  "comprador":{
    "email":"juan.perez@xyz.com",
    "identificacion":"0987654321",
    "tipo_identificacion":"05",
    "razon_social":"Juan Pérez",
    "direccion":"Calle única Numero 987",
    "telefono":"046029400"
  },
  "items":[
    {
      "cantidad":622.0,
      "codigo_principal": "ZNC",
      "codigo_auxiliar": "050",
      "precio_unitario": 7.01,
      "descripcion": "Zanahoria granel  50 Kg.",
      "precio_total_sin_impuestos": 4360.22,
      "impuestos": [
        {
          "base_imponible":4359.54,
          "valor":523.14,
          "tarifa":12.0,
          "codigo":"2",
          "codigo_porcentaje":"2"
        }
      ],
      "detalles_adicionales": {
        "Peso":"5000.0000"
      },
      "descuento": 0.0
    }
  ],
  "pagos": [
    {
      "medio": "cheque",
      "total": 4882.68,
      "propiedades": {
        "numero": "1234567890",
        "banco": "Banco Pacífico"
      }
    }
  ]
}'</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">json</span>

<span class="n">factura</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span>
  <span class="s">"fecha_emision"</span><span class="p">:</span><span class="s">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"emisor"</span><span class="p">:{</span>
    <span class="s">"ruc"</span><span class="p">:</span><span class="s">"0910000000001"</span><span class="p">,</span>
    <span class="s">"obligado_contabilidad"</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
    <span class="s">"contribuyente_especial"</span><span class="p">:</span><span class="s">"12345"</span><span class="p">,</span>
    <span class="s">"nombre_comercial"</span><span class="p">:</span><span class="s">"XYZ Corp"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"XYZ Corporación S.A."</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span>
    <span class="s">"establecimiento"</span><span class="p">:{</span>
      <span class="s">"punto_emision"</span><span class="p">:</span><span class="s">"002"</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span><span class="s">"001"</span><span class="p">,</span>
      <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"moneda"</span><span class="p">:</span><span class="s">"USD"</span><span class="p">,</span>
  <span class="s">"informacion_adicional"</span><span class="p">:{</span>
    <span class="s">"Tiempo de entrega"</span><span class="p">:</span><span class="s">"5 días"</span>
  <span class="p">},</span>
  <span class="s">"totales"</span><span class="p">:{</span>
    <span class="s">"total_sin_impuestos"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
    <span class="s">"impuestos"</span><span class="p">:[</span>
      <span class="p">{</span>
        <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">"valor"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
        <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"0"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
        <span class="s">"valor"</span><span class="p">:</span><span class="mf">523.14</span><span class="p">,</span>
        <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
        <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"2"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s">"importe_total"</span><span class="p">:</span><span class="mf">4882.68</span><span class="p">,</span>
    <span class="s">"propina"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
    <span class="s">"descuento"</span><span class="p">:</span><span class="mf">0.0</span>
  <span class="p">},</span>
  <span class="s">"comprador"</span><span class="p">:{</span>
    <span class="s">"email"</span><span class="p">:</span><span class="s">"juan.perez@xyz.com"</span><span class="p">,</span>
    <span class="s">"identificacion"</span><span class="p">:</span><span class="s">"0987654321"</span><span class="p">,</span>
    <span class="s">"tipo_identificacion"</span><span class="p">:</span><span class="s">"05"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"Juan Pérez"</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Calle única Numero 987"</span><span class="p">,</span>
    <span class="s">"telefono"</span><span class="p">:</span><span class="s">"046029400"</span>
  <span class="p">},</span>
  <span class="s">"items"</span><span class="p">:[</span>
    <span class="p">{</span>
      <span class="s">"cantidad"</span><span class="p">:</span><span class="mf">622.0</span><span class="p">,</span>
      <span class="s">"codigo_principal"</span><span class="p">:</span><span class="s">"ZNC"</span><span class="p">,</span>
      <span class="s">"codigo_auxiliar"</span><span class="p">:</span> <span class="s">"050"</span><span class="p">,</span>
      <span class="s">"precio_unitario"</span><span class="p">:</span> <span class="mf">7.01</span><span class="p">,</span>
      <span class="s">"descripcion"</span><span class="p">:</span> <span class="s">"Zanahoria granel  50 Kg."</span><span class="p">,</span>
      <span class="s">"precio_total_sin_impuestos"</span><span class="p">:</span> <span class="mf">4360.22</span><span class="p">,</span>
      <span class="s">"impuestos"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
          <span class="s">"valor"</span><span class="p">:</span><span class="mf">523.14</span><span class="p">,</span>
          <span class="s">"tarifa"</span><span class="p">:</span><span class="mf">12.0</span><span class="p">,</span>
          <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
          <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"2"</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="s">"detalles_adicionales"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"Peso"</span><span class="p">:</span><span class="s">"5000.0000"</span>
      <span class="p">},</span>
      <span class="s">"descuento"</span><span class="p">:</span> <span class="mf">0.0</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s">"pagos"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s">"medio"</span><span class="p">:</span> <span class="s">"cheque"</span><span class="p">,</span>
      <span class="s">"total"</span><span class="p">:</span> <span class="mf">4882.68</span><span class="p">,</span>
      <span class="s">"propiedades: {</span><span class="err">
</span><span class="s">        "</span><span class="n">numero</span><span class="s">": "</span><span class="mi">1234567890</span><span class="s">",</span><span class="err">
</span><span class="s">        "</span><span class="n">banco</span><span class="s">": "</span><span class="n">Banco</span> <span class="n">Pac</span><span class="err">í</span><span class="n">fico</span><span class="s">"</span><span class="err">
</span><span class="s">      }</span><span class="err">
</span><span class="s">    }</span><span class="err">
</span><span class="s">  ]</span><span class="err">
</span><span class="s">}</span><span class="err">
</span><span class="s">cabeceras = {</span><span class="err">
</span><span class="s">    'x-key': '&lt;clave-del-api&gt;',</span><span class="err">
</span><span class="s">    'x-password': '&lt;clave-certificado-firma&gt;',</span><span class="err">
</span><span class="s">    'content-type': 'application/json'}</span><span class="err">
</span><span class="s">respuesta = requests.post(</span><span class="err">
</span><span class="s">    "</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">link</span><span class="o">.</span><span class="n">datil</span><span class="o">.</span><span class="n">co</span><span class="o">/</span><span class="n">invoices</span><span class="o">/</span><span class="n">issue</span><span class="s">",</span><span class="err">
</span><span class="s">    headers = cabeceras,</span><span class="err">
</span><span class="s">    data = json.dumps(factura))</span><span class="err">
</span></code></pre>
<pre class="highlight csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Este ejemplo utiliza RestSharp
</span>      <span class="c1">// Para instalar anda al menú: tools &gt; Library Package Manager &gt; Package Manager Console
</span>      <span class="c1">// copia y pega y presiona enter: Install-Package RestSharp
</span>
      <span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/issue"</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Password"</span><span class="p">,</span> <span class="s">"&lt;clave-certificado-firma&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="n">RequestFormat</span> <span class="p">=</span> <span class="n">DataFormat</span><span class="p">.</span><span class="n">Json</span><span class="p">;</span>

      <span class="n">var</span> <span class="n">body</span> <span class="p">=</span> <span class="p">(</span><span class="err">@</span><span class="s">"{
</span>        <span class="s">""</span><span class="n">ambiente</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">tipo_emision</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">secuencial</span><span class="s">""</span><span class="p">:</span><span class="m">148</span><span class="p">,</span>
        <span class="s">""</span><span class="n">fecha_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">02</span><span class="p">-</span><span class="m">28</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">emisor</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">ruc</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0910000000001</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">obligado_contabilidad</span><span class="s">""</span><span class="p">:</span><span class="k">true</span><span class="p">,</span>
          <span class="s">""</span><span class="n">contribuyente_especial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12345</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">nombre_comercial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corp</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corporaci</span><span class="err">ó</span><span class="n">n</span> <span class="n">S</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">establecimiento</span><span class="s">""</span><span class="p">:{</span>
            <span class="s">""</span><span class="n">punto_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">002</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">moneda</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">USD</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">informacion_adicional</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">Tiempo</span> <span class="n">de</span> <span class="n">entrega</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5</span> <span class="n">d</span><span class="err">í</span><span class="k">as</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">totales</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">total_sin_impuestos</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
          <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:[</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">523.14</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
            <span class="p">}</span>
          <span class="p">],</span>
          <span class="s">""</span><span class="n">importe_total</span><span class="s">""</span><span class="p">:</span><span class="m">4882.68</span><span class="p">,</span>
          <span class="s">""</span><span class="n">propina</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
          <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">comprador</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">email</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">juan</span><span class="p">.</span><span class="n">perez@xyz</span><span class="p">.</span><span class="n">com</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0987654321</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">05</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Juan</span> <span class="n">P</span><span class="err">é</span><span class="n">rez</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Calle</span> <span class="err">ú</span><span class="n">nica</span> <span class="n">Numero</span> <span class="m">987</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">telefono</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">046029400</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">items</span><span class="s">""</span><span class="p">:[</span>
          <span class="p">{</span>
            <span class="s">""</span><span class="n">cantidad</span><span class="s">""</span><span class="p">:</span><span class="m">622.0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_principal</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">ZNC</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_auxiliar</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">050</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_unitario</span><span class="s">""</span><span class="p">:</span> <span class="m">7.01</span><span class="p">,</span>
            <span class="s">""</span><span class="n">descripcion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Zanahoria</span> <span class="n">granel</span>  <span class="m">50</span> <span class="n">Kg</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_total_sin_impuestos</span><span class="s">""</span><span class="p">:</span> <span class="m">4360.22</span><span class="p">,</span>
            <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
                <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">523.14</span><span class="p">,</span>
                <span class="s">""</span><span class="n">tarifa</span><span class="s">""</span><span class="p">:</span><span class="m">12.0</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
              <span class="p">}</span>
            <span class="p">],</span>
            <span class="s">""</span><span class="n">detalles_adicionales</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
              <span class="s">""</span><span class="n">Peso</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5000.0000</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span> <span class="m">0.0</span>
          <span class="p">}</span>
      <span class="p">],</span>
      <span class="s">""</span><span class="n">pagos</span><span class="s">""</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s">""</span><span class="n">medio</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">cheque</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">total</span><span class="s">""</span><span class="p">:</span> <span class="m">4882.68</span><span class="p">,</span>
          <span class="s">""</span><span class="n">propiedades</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">""</span><span class="n">numero</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">1234567890</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">banco</span><span class="s">""</span><span class="p">:</span> <span class="s">"Banco Pacífico""
</span>          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
      <span class="p">}</span><span class="s">");
</span>      <span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"application/json"</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">RequestBody</span><span class="p">);</span>
      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Para la emisión de una factura se debe enviar la información completa del
comprobante en el cuerpo del requerimiento en formato JSON.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la factura. <strong>Requerido</strong></td>
</tr>
<tr>
<td>emisor</td>
<td><a href="#emisor">emisor</a></td>
<td>Información completa del emisor. <strong>Requerido</strong></td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
<tr>
<td>guia_remision</td>
<td>string</td>
<td>Número de guía de remisión asociada a esta factura en formato 001-002-000000003 ([0-9]{3}-[0-9]{3}-[0-9]{9})</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code class="prettyprint">1</code>.<br>Producción <code class="prettyprint">2</code>.<br><strong>Requerido</strong></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales-factura">totales</a></td>
<td>Listado de totales. <strong>Requerido</strong></td>
</tr>
<tr>
<td>comprador</td>
<td>objeto tipo <a href="#persona">persona</a></td>
<td>Información del comprador. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code class="prettyprint">1</code>.<br>Emisión por indisponibilidad: <code class="prettyprint">2</code><br><strong>Requerido</strong></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la factura. <strong>Requerido</strong></td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión del formato de comprobantes electrónicos de SRI. Si no se especifica, se utilizará la última revisión del formato implementada,</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>informacion_adicional</td>
<td>objeto</td>
<td>Información adicional adjunta al comprobante en forma de diccionario. Ejemplo:<br><code class="prettyprint">{&quot;plan&quot;: &quot;Inicial&quot;, &quot;vigencia&quot;: &quot;1 mes&quot;}</code></td>
</tr>
<tr>
<td>retenciones</td>
<td>Listado de objetos de tipo <a href="#retencion-de-factura">retencion</a></td>
<td>Retenciones incluídas en la factura. Caso específico de Retenciones en la Comercializadores / Distribuidores de derivados del Petróleo y Retención presuntiva de IVA a los Editores, Distribuidores y Voceadores que participan en la comercialización de periódicos y/o revistas.</td>
</tr>
<tr>
<td>pagos</td>
<td>Listado de objetos tipo <a href="#pagos">pagos</a></td>
<td>Listado de formas de pago aplicables a la factura. <strong>Requerido</strong></td>
</tr>
<tr>
<td>credito</td>
<td>Objeto de tipo <a href="#cr-dito">credito</a></td>
<td>Información del crédito directo otorgado al cliente.</td>
</tr>
</tbody></table>

<h4 id="totales">Totales</h4>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>total_sin_impuestos</td>
<td>float</td>
<td>Total antes de los impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>descuento_adicional</td>
<td>float</td>
<td>Descuento aplicado al subtotal de la factura.</td>
</tr>
<tr>
<td>descuento</td>
<td>float</td>
<td>Suma de los descuentos de cada ítem y del descuento adicional. <strong>Requerido</strong></td>
</tr>
<tr>
<td>propina</td>
<td>float</td>
<td>Propina total, llamado también servicio. <strong>Requerido</strong></td>
</tr>
<tr>
<td>importe_total</td>
<td>float</td>
<td>Total incluyendo impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>impuestos</td>
<td>listado de objetos <a href="#total-impuesto">total impuesto</a></td>
<td>Listado de impuesto totalizados. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h4 id="pagos">Pagos</h4>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>medio</td>
<td>string</td>
<td>Código del <a href="#tipos-de-forma-de-pago">tipo de forma de pago</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>total</td>
<td>float</td>
<td>Total aplicable a la forma de pago especificada. <strong>Requerido</strong></td>
</tr>
<tr>
<td>propiedades</td>
<td>objeto</td>
<td>Información adicional adjunta al pago en forma de diccionario. Ejemplo:<br><code class="prettyprint">{&quot;plazo&quot;: &quot;30&quot;, &quot;unidad_tiempo&quot;: &quot;dias&quot;}</code></td>
</tr>
</tbody></table>

<h4 id="cr-dito">Crédito</h4>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>fecha_vencimiento</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DD, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>monto</td>
<td>float</td>
<td>Monto otorgado de crédito. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<blockquote>
<h4 id="respuesta-de-ejemplo">Respuesta de ejemplo</h4>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef09876123cea56784f01"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span><span class="w">
  </span><span class="nt">"fecha_emision"</span><span class="p">:</span><span class="s2">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2802201501091000000000120010010000100451993736618"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"emisor"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0910000000001"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corp"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corporación S.A."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"Tiempo de entrega"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5 días"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
    </span><span class="nt">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
        </span><span class="nt">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">523.14</span><span class="p">,</span><span class="w">
        </span><span class="nt">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">4882.68</span><span class="p">,</span><span class="w">
    </span><span class="nt">"propina"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juan.perez@xyz.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"046029400"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">622.0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZNC"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"050"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.01</span><span class="p">,</span><span class="w">
      </span><span class="nt">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Zanahoria granel  50 Kg."</span><span class="p">,</span><span class="w">
      </span><span class="nt">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4360.22</span><span class="p">,</span><span class="w">
      </span><span class="nt">"impuestos"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
          </span><span class="nt">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">523.14</span><span class="p">,</span><span class="w">
          </span><span class="nt">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.0</span><span class="p">,</span><span class="w">
          </span><span class="nt">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"Peso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5000.0000"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"pagos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"medio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cheque"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">4882.68</span><span class="p">,</span><span class="w">
      </span><span class="nt">"propiedades: {
        "</span><span class="err">numero</span><span class="nt">": "</span><span class="err">1234567890</span><span class="nt">",
        "</span><span class="err">banco</span><span class="nt">": "</span><span class="err">Banco</span><span class="w"> </span><span class="err">Pacífico"</span><span class="w">
      </span><span class="err">}</span><span class="w">
    </span><span class="err">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Retorna un objeto tipo <strong><a href="#requerimiento">factura</a></strong> que incluye un nuevo parámetro <code class="prettyprint">id</code>,
el cual identifica de manera única a la factura. El campo <code class="prettyprint">clave_acceso</code> generado
también se incluirá como parte de la respuesta.</p>

<h2 id="consulta-de-una-factura">Consulta de una factura</h2>

<p>Consulta una factura para obtener toda la información del comprobante, incluyendo
el estado del mismo.
El parámetro <code class="prettyprint">estado</code> de la respuesta obtenida al invocar esta operación, indica
el estado actual del comprobante.</p>

<p>Si es necesario conocer en detalle, en que estado del <a href="#proceso-de-emisión">proceso de emisión</a>,
se debe examinar los parámetros <code class="prettyprint">envio_sri</code> y <code class="prettyprint">autorizacion_sri</code> de la respuesta.</p>

<h3 id="operaci-n">Operación</h3>

<p><code class="prettyprint">GET /invoices/&lt;invoice-id&gt;</code></p>

<h3 id="requerimiento">Requerimiento</h3>

<blockquote>
<h4 id="requerimiento-de-ejemplo">Requerimiento de ejemplo</h4>
</blockquote>
<pre class="highlight shell"><code>curl -v https://link.datil.co/invoices/&lt;id-factura&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;clave-del-api&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://link.datil.co/invoices/&lt;id-factura&gt;'</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">)</span>
</code></pre>
<pre class="highlight csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="n">var</span> <span class="n">idFactura</span> <span class="p">=</span> <span class="s">"&lt;id-factura&gt;"</span><span class="p">;</span>
      <span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/"</span> <span class="p">+</span> <span class="n">idFactura</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>

      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Reemplaza en la ruta <code class="prettyprint">&lt;invoice-ID&gt;</code> por el <code class="prettyprint">id</code> de la factura que necesitas consultar.</p>

<h3 id="respuesta">Respuesta</h3>

<blockquote>
<h4 id="respuesta-de-ejemplo">Respuesta de ejemplo</h4>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcf12343faad06785"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201501099271255400110011000000000162092727615"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0992712554001"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="nt">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dátil"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nt">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V.E. 112 Y CIRCUNVALACION NORTE"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"correos_enviados"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"fecha_envio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:36:48.274604"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"destinatarios"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juanantonioplaza@datilmedia.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"guia_remision"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nt">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"propina"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nt">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.00"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nt">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"168.00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carlos L. Plaza"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0900102222"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cplaza@gye593.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle Uno y Calle Dos"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"043334445"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"envio_sri"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="nt">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECIBIDA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"Estadía"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2 noches"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"Habitación"</span><span class="p">:</span><span class="w"> </span><span class="s2">"203"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.000000"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HAB"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DOB"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Habitación doble"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.000000"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nt">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12.00"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.00"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"pagos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"medio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cheque"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">4882.68</span><span class="p">,</span><span class="w">
        </span><span class="nt">"propiedades: {
          "</span><span class="err">numero</span><span class="nt">": "</span><span class="err">1234567890</span><span class="nt">",
          "</span><span class="err">banco</span><span class="nt">": "</span><span class="err">Banco</span><span class="w"> </span><span class="err">Pacífico</span><span class="nt">"
        }
      }
    ],
    "</span><span class="err">autorizacion</span><span class="nt">": {
        "</span><span class="err">estado</span><span class="nt">": "</span><span class="err">AUTORIZADO</span><span class="nt">",
        "</span><span class="err">mensajes</span><span class="nt">": [
            {
                "</span><span class="err">identificador</span><span class="nt">": "</span><span class="err">60</span><span class="nt">",
                "</span><span class="err">mensaje</span><span class="nt">": "</span><span class="err">ESTE</span><span class="w"> </span><span class="err">PROCESO</span><span class="w"> </span><span class="err">FUE</span><span class="w"> </span><span class="err">REALIZADO</span><span class="w"> </span><span class="err">EN</span><span class="w"> </span><span class="err">EL</span><span class="w"> </span><span class="err">AMBIENTE</span><span class="w"> </span><span class="err">DE</span><span class="w"> </span><span class="err">PRUEBAS</span><span class="nt">",
                "</span><span class="err">tipo</span><span class="nt">": "</span><span class="err">INFORMATIVO</span><span class="nt">",
                "</span><span class="err">informacion_adicional</span><span class="nt">": ""
            }
        ],
        "</span><span class="err">numero</span><span class="nt">": "</span><span class="err">1505201516323509927125540010266935227</span><span class="nt">",
        "</span><span class="err">fecha</span><span class="nt">": "</span><span class="err">2015-05-15T16</span><span class="p">:</span><span class="mi">32</span><span class="err">:</span><span class="mf">35.000380</span><span class="err">"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="err">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la factura.</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Posibles valores: <code class="prettyprint">AUTORIZADO</code>, <code class="prettyprint">NO AUTORIZADO</code>, <code class="prettyprint">ENVIADO</code>, <code class="prettyprint">DEVUELTO</code>, <code class="prettyprint">RECIBIDO</code></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf">ISO8601</a>.</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>envio_sri</td>
<td>objeto tipo <a href="#envío-sri">envio sri</a></td>
<td>Información luego de enviar el comprobante.</td>
</tr>
<tr>
<td>autorizacion</td>
<td>objeto tipo <a href="#autorización-sri">autorizacion sri</a></td>
<td>Información de la autorización.org/html/rfc3339#section-5.6).</td>
</tr>
<tr>
<td>emisor</td>
<td>objeto tipo <a href="#emisor">emisor</a></td>
<td>Información completa del emisor.</td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code class="prettyprint">1</code>.<br>Producción <code class="prettyprint">2</code>.<br></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales">totales</a></td>
<td>Listado de totales.</td>
</tr>
<tr>
<td>comprador</td>
<td>objeto <a href="#persona">persona</a></td>
<td>Información del comprador.</td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code class="prettyprint">1</code>.<br>Emisión por indisponibilidad: <code class="prettyprint">2</code><br></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la factura.</td>
</tr>
<tr>
<td>pagos</td>
<td>listado de objetos tipo <a href="#pagos">pagos</a></td>
<td>Listado de formas de pago aplicables a la factura.</td>
</tr>
<tr>
<td>credito</td>
<td>Objeto de tipo <a href="#cr-dito">credito</a></td>
<td>Información del crédito directo otorgado al cliente.</td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión de la especificación, opciones válidas: <code class="prettyprint">1.0.0</code>, <code class="prettyprint">1.1.0</code></td>
</tr>
</tbody></table>

<h2 id="re-emisi-n-de-una-factura">Re-emisión de una factura</h2>

<h3 id="operaci-n">Operación</h3>

<p><code class="prettyprint">POST /invoices/:id/reissue</code></p>

<h3 id="requerimiento">Requerimiento</h3>

<p>Esta operación debe ser utilizada para corregir comprobantes NO AUTORIZADOS o
DEVUELTOS por el Servicio de Rentas Internas.</p>

<p>En la URL de esta opción se debe incluir el <code class="prettyprint">id</code> de la factura recibida al
momento de emitirla.</p>

<p>El cuerpo del requerimiento es un objeto <a href="#requerimiento">factura</a> con los
datos corregidos para que pueda ser procesado y autorizado.</p>

<h3 id="respuesta">Respuesta</h3>

<p>Retornará un error si el comprobante se encuentra autorizado.</p>
