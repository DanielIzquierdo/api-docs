<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Dátil Link App</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="../stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="../javascripts/all.js"></script>
  </head>

  <body class="link-app link-app_index" data-languages="[&quot;sql&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="../images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="sql">Ejemplo SQL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Para obtener mi clave del API</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentación gracias a Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introducci-n">Introducción</h1>

<p>Integra tu sistema contable o ERP con Facturación Electrónica. La aplicación <strong>Link</strong> de Dátil
te permite emitir todos los tipos de comprobantes electrónicos: facturas, retenciones,
notas de crédito, notas de débito y guías de remisión.</p>

<p>La aplicación Link de Dátil funciona en Windows y en Linux (próximamente) como un servicio del sistema operativo. De esta manera, Link se podrá mantener en ejecución permanente y emitiendo comprobantes.</p>

<p><strong>Link</strong> se conecta a la base de datos de tu ERP o sistema contable para obtener la información
de los comprobantes mientras sigues usando tu sistema como siempre lo has hecho.</p>

<h1 id="requisitos">Requisitos</h1>

<h2 id="sistema-operativo">Sistema Operativo</h2>

<p>Link es compatible con los siguientes sistemas operativos:</p>

<p><strong>Windows</strong></p>

<p><em>Disponible para 32 y 64 bits</em></p>

<ul>
<li>Windows Server 2003</li>
<li>Windows Server 2008</li>
<li>Windows Server 2012</li>
<li>Windows XP</li>
<li>Windows Vista</li>
<li>Windows 7</li>
<li>Windows 8</li>
</ul>

<p>Para saber si la versión de su equipo es de 32 o 64 bits en Windows, siga los pasos del <a href="https://support.microsoft.com/es-es/kb/827218">siguiente enlace</a>.</p>

<p><strong>Linux</strong> (próximamente)</p>

<ul>
<li>Centos</li>
<li>Ubuntu</li>
</ul>

<h2 id="motor-de-base-de-datos">Motor de Base de Datos</h2>

<p>Link puede conectarse a los siguientes motores de bases de datos relacionales:</p>

<p><strong>SQL Server</strong> </p>

<ul>
<li>SQL Server 2000</li>
<li>SQL Server 2005</li>
<li>SQL Server 2008</li>
<li>SQL Server 2012</li>
<li>SQL Server 2014</li>
</ul>

<p>Para conocer la versión de SQL Server puede ejecutar el siguiente comando</p>

<p><code class="prettyprint">SELECT @@version</code></p>

<p>Link también puede  extraer información de los siguientes archivos de base de datos:</p>

<p><strong>DBF (Visual Fox Pro)</strong></p>

<h1 id="descargas">Descargas</h1>

<p>Instaladores del programa Link de Dátil:</p>

<p><strong>Windows</strong></p>

<p>Windows 32 bits: [linkapp-windows-32bits]
Windows 64 bits: [linkapp-windows-64bits]</p>

<p><strong>Linux</strong></p>

<p>Centos 32 bits (próximamente)</p>

<p>Centos 64 bits (próximamente)</p>

<p>Ubuntu 32 bits (próximamente)</p>

<p>Ubuntu 64 bits (próximamente)</p>

<h1 id="instalaci-n">Instalación</h1>

<p>Luego de descargar el instalador, empiece la instalación con doble click, siguiendo
el flujo de ventanas que aparecerán en su pantalla.</p>

<p><img src='../images/linkapp/install-step-1.png'></img>
<img src='../images/linkapp/install-step-3.png'></img>
<img src='../images/linkapp/install-step-4.png'></img>
<img src='../images/linkapp/install-step-5.png'></img></p>

<h1 id="configuraci-n">Configuración</h1>

<h2 id="tablas-de-control-y-mensaje">Tablas de Control y Mensaje</h2>

<p>Control y Mensaje son tablas que el programa Link necesita para llevar control de los comprobantes emitidos. Pueden estar creados en la misma base de datos o en una distinta a la que almacena la información de los comprobantes.</p>

<p>Para crear la tabla de control  y mensaje ejecutar:</p>

<pre>
CREATE TABLE
    Control(
    id_control bigint IDENTITY(1,1) NOT NULL PRIMARY KEY,
    tipo_comprobante int NOT NULL,
    id_local varchar(100) NOT NULL,
    numero_comprobante varchar(20) NOT NULL,
    estado varchar(13),
    numero_autorizacion varchar(100),
    fecha_autorizacion datetime,
    fecha_emision datetime,
    fecha_ingreso datetime,
    fecha_ultimo_envio datetime,
    clave_acceso varchar(50),
    id_externo varchar(40),
    company_name varchar(40),
    CONSTRAINT ix_tipo_idlocal UNIQUE (tipo_comprobante, id_local, numero_comprobante, company_name)
    )
</pre>

<pre>
CREATE TABLE
    Mensaje(
    id_control bigint,
    identificador varchar(2) NOT NULL,
    mensaje TEXT NOT NULL,
    tipo varchar(50) NOT NULL,
    fecha_creacion datetime NOT NULL,
    CONSTRAINT pk_comprobante_identificador PRIMARY KEY (id_control, identificador),
    CONSTRAINT fk_control_id FOREIGN KEY (id_control) REFERENCES Control(id_control)
    )
</pre>

<h2 id="configuraci-n-general">Configuración general</h2>

<p>Abrir el Bloc de Notas con permisos de administrador, dando click derecho y escogiendo
<strong>Ejecutar como administrador</strong>. Escoger <code class="prettyprint">Archivo</code> -&gt; <code class="prettyprint">Abrir</code> -&gt; <code class="prettyprint">C:\Archivos de Programa\Datil\Link\config</code>, en la opción <code class="prettyprint">Tipo</code> de la ventana seleccionar <em>Todos los archivos</em> y seleccionar <code class="prettyprint">environment.ini</code></p>

<h3 id="general">General</h3>

<p>Es la configuración general de la aplicación</p>

<p>En la sección <code class="prettyprint">[General]</code> editar los parámetros:</p>

<ul>
<li><code class="prettyprint">company</code> con el nombre de la compañía, ejemplo <code class="prettyprint">Seguros Segurito S.A.</code></li>
</ul>

<h3 id="databasesource">DatabaseSource</h3>

<p>Es la configuración de la base de datos que contiene las tablas de  control y mensaje.</p>

<h4 id="sql-server">SQL Server</h4>

<p>En la sección <code class="prettyprint">[DatabaseSource]</code> editar los parámetros:</p>

<ul>
<li><code class="prettyprint">driver</code> con el valor  <code class="prettyprint">SQL Server</code>.</li>
<li><code class="prettyprint">server</code> con la url o ip o nombre del servidor de base de datos donde se crearon las tablas de Control y Mensaje. Ejemplo: localhost, 192.168.100.102, ADMIN\SQLEXPRESS.</li>
<li><code class="prettyprint">name</code> con el nombre de la base de datos.</li>
<li><code class="prettyprint">user</code> con el usuario que tiene acceso a la base de datos.</li>
<li><code class="prettyprint">password</code> con la clave de acceso a la base de datos.</li>
<li><code class="prettyprint">version</code> con la versión de SQL Server.</li>
<li><code class="prettyprint">api</code> con el valor <code class="prettyprint">odbc</code>.</li>
</ul>

<p>Dejar <code class="prettyprint">datasource</code>  y <code class="prettyprint">provider</code> con el valor <code class="prettyprint">None</code> porque no aplican para la conexión con 
SQL Server</p>

<h3 id="constraints">Constraints</h3>

<p>En la sección <code class="prettyprint">[Constraints]</code> editar el parámetro <code class="prettyprint">first_receipt_date</code> con la fecha desde la cual se desea emitir el primer comprobante. La fecha debe tener el formato <code class="prettyprint">YYYY-mm-dd hh:MM:SS</code> Ejemplo: <code class="prettyprint">2016-09-12 13:40:00</code> para el 12 de septiembre del año 2016 a las trece horas con cuarenta minutos y cero segundos. El tiempo debe estar en formato de 24 horas.</p>

<h3 id="notification">Notification</h3>

<p>En la sección <code class="prettyprint">[Notification]</code>:</p>

<p>Editar el parámetro <code class="prettyprint">email_api_key</code> con el API key de Sendgrid para el envío de emails.</p>

<p>Editar el parámetro <code class="prettyprint">dest_email</code> si desea recibir notificaciones cuando ocurra algún error al emitir un comprobante. Agregue una o varias direcciones de correo electrónico al separadas por coma (,).</p>

<p>Guardar el archivo con la configuración editada.</p>

<h2 id="configuraci-n-de-la-compa-a">Configuración de la compañía</h2>

<p>Abrir el Bloc de Notas con permisos de administrador, dando click derecho y escogiendo
<strong>Ejecutar como administrador</strong>. Escoger <code class="prettyprint">Archivo</code> -&gt; <code class="prettyprint">Abrir</code> -&gt; <code class="prettyprint">C:\Archivos de Programa\Datil\Link\config\companies</code>, en la opción <code class="prettyprint">Tipo</code> de la ventana seleccionar <em>Todos los archivos</em> y seleccionar <code class="prettyprint">my_company.ini</code></p>

<h3 id="general">General</h3>

<p>En la sección <code class="prettyprint">[General]</code> configurar el parámetro <code class="prettyprint">ruc</code> con el ruc de la empresa.</p>

<h3 id="api">Api</h3>

<p>En la sección <code class="prettyprint">[Api]</code> configurar el parámetro <code class="prettyprint">xkey</code> con el <em>API key</em> de Dátil y 
<code class="prettyprint">xpassword</code> con la clave del certificado de firma electrónica, <code class="prettyprint">environment</code> con el valor <code class="prettyprint">1</code> para emisión en modo de pruebas o <code class="prettyprint">2</code> para emitir en producción.</p>

<h3 id="databasesource">DatabaseSource</h3>

<p>Es la configuración de la base de datos de comprobantes</p>

<h4 id="sql-server">SQL Server</h4>

<p>En la sección <code class="prettyprint">[DatabaseSource]</code> editar los parámetros:</p>

<ul>
<li><code class="prettyprint">driver</code> con el valor <code class="prettyprint">SQL Server</code>.</li>
<li><code class="prettyprint">server</code> con la url o ip o nombre del servidor de base de datos que contiene la información de los comprobantes. Ejemplo: localhost, 192.168.100.102, ADMIN\SQLEXPRESS.</li>
<li><code class="prettyprint">name</code> con el nombre de la base de datos de los comprobantes.</li>
<li><code class="prettyprint">user</code> con el usuario que tiene acceso a la base de datos de los comprobantes.</li>
<li><code class="prettyprint">password</code> con la clave de acceso a la base de datos de los comprobantes.</li>
<li><code class="prettyprint">version</code> con la versión de SQL Server.</li>
<li><code class="prettyprint">api</code> con el valor <code class="prettyprint">odbc</code>.</li>
</ul>

<p>Dejar <code class="prettyprint">datasource</code>  y <code class="prettyprint">provider</code> con el valor <code class="prettyprint">None</code> porque no aplican para la conexión con 
SQL Server</p>

<h4 id="dbf-visual-fox-pro">DBF (Visual Fox Pro)</h4>

<ul>
<li><code class="prettyprint">api</code> con el valor <code class="prettyprint">adodb</code>.</li>
<li><code class="prettyprint">datasource</code> con la ruta hacia la carpeta donde están contenidos los archivos .dfb. Ejemplo: C:\Program Files\Contabilidad\Facturacion`</li>
<li><code class="prettyprint">provider</code> con el valor <code class="prettyprint">VFPOLEDB.1</code></li>
</ul>

<p><code class="prettyprint">driver</code>, <code class="prettyprint">server</code>, <code class="prettyprint">name</code>, <code class="prettyprint">user</code>, <code class="prettyprint">password</code> y <code class="prettyprint">version</code>, no aplican para la conexión con archivos DBF</p>

<p>Al terminar la edición del archivo se puede cambiar el nombre del mismo por el de la compañía, el nombre no debe llevar espacios, solo letras, números y subguiones. Ejemplo: 
<code class="prettyprint">seguros_secomsap</code></p>

<h1 id="ejecutar-el-servicio">Ejecutar el servicio</h1>

<p>En el menú <code class="prettyprint">Inicio</code> buscar el <code class="prettyprint">Simbolo del Sistema</code> , darle click derecho y escoger la opción <code class="prettyprint">Ejecutar como administrador</code>.</p>

<p>Luego para iniciar el servicio ejecutar el comando:</p>

<p><code class="prettyprint">net start datilink</code></p>

<p>Enter.</p>

<p>Si desea detener el servicio, ejecutar:</p>

<p><code class="prettyprint">net stop datilink</code></p>

<h1 id="queries">Queries</h1>

<p><strong>Tablas o Vistas</strong></p>

<p>Para que la aplicación <strong>Link</strong> se conecte a su ERP o sistema contable se deben configurar
los <em>queries</em> para extraer información directamente de las tablas  de su base de datos.</p>

<p>Si no desea que <strong>Link</strong> consulte directamente sus tablas puede crear vistas con la información
de los comprobantes a emitir.</p>

<p><strong>Formato</strong></p>

<p>Los queries se guardan siguiendo el formato de archivos <code class="prettyprint">.ini</code>. en el directorio
<em>C:/Archivos de Programa/Datil/Link/config/</em>.</p>

<p>En cada archivo <code class="prettyprint">.ini</code> cada <em>query</em> está asignado a una variable.</p>

<p>Si aún no ha instalado <strong>Link</strong>, puede crear un archivo <code class="prettyprint">.ini</code> de respaldo con los queries configurados.</p>

<p><a href="link-app#ejemplos-de-archivos-de-configuraci-n">Ver ejemplos de archivos de configuración</a></p>

<p><strong>Nombres de tablas y columnas</strong></p>

<p>Sea directamente o por medio de vistas, dependiendo de su sistema, deberá cambiar los nombres de las tablas  al configurar los <em>queries</em>.</p>

<p>Los nombres de las columnas en las tablas
de su sistema pueden ser distintos pero el resultado de cada <em>query</em> debe tener los nombres establecidos en esta documentación.</p>

<p><strong>Queries opcionales</strong></p>

<p>Algunos queries son opcionales porque la información que extraen no es obligatoria para el SRI, en este caso la variable que se configura en el archivo <code class="prettyprint">.ini</code> debe tener asignada el valor de <code class="prettyprint">None</code>.</p>

<p>Ejemplo:</p>

<p><code class="prettyprint">invoice_additional_information = None</code></p>

<p><code class="prettyprint">item_details = None</code></p>

<h2 id="facturas">Facturas</h2>

<p>Los queries para la emisión electrónica de <strong>facturas</strong> se guardan en el archivo de configuración <code class="prettyprint">invoice.ini</code>.</p>

<p><a href="/link-app#invoice-ini">Ejemplo de archivo invoice.ini</a></p>

<h3 id="cabecera">Cabecera</h3>

<p>Obtiene información de la cabecera de la factura</p>
<pre class="highlight sql"><code><span class="n">headers</span> <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">id_factura</span>            <span class="n">id_local</span><span class="p">,</span>
  <span class="n">secuencial</span><span class="p">,</span>
  <span class="n">fecha_emision</span><span class="p">,</span>
  <span class="n">guia_remision</span><span class="p">,</span>
  <span class="n">moneda</span><span class="p">,</span>
  <span class="n">clave_acceso</span><span class="p">,</span>
  <span class="n">tipo_emision</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoFactura</span><span class="p">.</span><span class="n">cabecera</span>
  <span class="k">WHERE</span>
  <span class="n">info</span><span class="p">.</span><span class="n">id_factura</span> <span class="k">in</span> <span class="p">(:</span><span class="n">sequence</span><span class="p">)</span>
  <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">id_factura</span> <span class="p">:</span><span class="k">order</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Descripción</th>
<th>Valor de ejemplo</th>
</tr>
</thead><tbody>
<tr>
<td>id_local</td>
<td>string</td>
<td>Identifica de manera única la factura. <strong>Requerido</strong></td>
</tr>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la factura. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>datetime</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.  <strong>Requerido</strong></td>
</tr>
<tr>
<td>guia_remision</td>
<td>string</td>
<td>Número de guía de remisión asociada a esta factura en formato 001-002-000000003 ([0-9]{3}-[0-9]{3}-[0-9]{9})</td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda. <strong>Requerido</strong></td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code class="prettyprint">1</code>.<br>Emisión por indisponibilidad: <code class="prettyprint">2</code><br><strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="vendedor">Vendedor</h3>

<p>Obtiene información del vendedor en la factura</p>
<pre class="highlight sql"><code><span class="n">invoice_seller</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">ruc</span><span class="p">,</span>
  <span class="n">obligado_contabilidad</span><span class="p">,</span>
  <span class="n">contribuyente_especial</span><span class="p">,</span>
  <span class="n">nombre_comercial</span><span class="p">,</span>
  <span class="n">razon_social</span><span class="p">,</span>
  <span class="n">direccion_establecimiento</span><span class="p">,</span>
  <span class="n">direccion_emisor</span><span class="p">,</span>
  <span class="n">codigo</span><span class="p">,</span>
  <span class="n">punto_emision</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoFactura</span><span class="p">.</span><span class="n">cabecera</span>
  <span class="k">WHERE</span>
  <span class="n">id_factura</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>ruc</td>
<td>string</td>
<td>Número de RUC de 13 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>obligado_contabilidad</td>
<td>string</td>
<td><code class="prettyprint">&#39;SI&#39;</code> si está obligado a llevar contabilidad. <code class="prettyprint">&#39;NO&#39;</code> si no lo está.</td>
</tr>
<tr>
<td>contribuyente_especial</td>
<td>string</td>
<td>Número de resolución. En blanco <code class="prettyprint">&#39;&#39;</code> si no es contribuyente especial.</td>
</tr>
<tr>
<td>nombre_comercial</td>
<td>string</td>
<td>Nombre comercial. Máximo 300 caracteres <strong>Requerido</strong></td>
</tr>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social. Máximo 300 caracteres <strong>Requerido</strong></td>
</tr>
<tr>
<td>direccion_establecimiento</td>
<td>string</td>
<td>Dirección registrada en el SRI. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>direccion_emisor</td>
<td>string</td>
<td>Dirección del punto de emisión. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código numérico de 3 caracteres que representa al establecimiento. Ejemplo: <code class="prettyprint">001</code> <strong>Requerido</strong></td>
</tr>
<tr>
<td>punto_emision</td>
<td>string</td>
<td>Código numérico de 3 caracteres que representa al punto de emisión, o punto de venta. Ejemplo: <code class="prettyprint">001</code>. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="comprador">Comprador</h3>

<p>Obtiene información del comprador en la factura</p>
<pre class="highlight sql"><code><span class="n">invoice_buyer</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">identificacion</span><span class="p">,</span>
  <span class="n">tipo_identificacion</span><span class="p">,</span>
  <span class="n">razon_social</span><span class="p">,</span>
  <span class="n">direccion</span><span class="p">,</span>
  <span class="n">email</span><span class="p">,</span>
  <span class="n">telefono</span>
  <span class="k">FROM</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoFactura</span><span class="p">.</span><span class="n">cabecera</span>
  <span class="k">WHERE</span>
  <span class="n">id_factura</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>identificacion</td>
<td>string</td>
<td>De 5 a 20 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_identificacion</td>
<td>string</td>
<td>Ver <a href="#tipo-de-identificaci-n">tabla</a> de tipos de identificación <strong>Requerido</strong></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Correo electrónico. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>telefono</td>
<td>string</td>
<td>Teléfono</td>
</tr>
<tr>
<td>direccion</td>
<td>string</td>
<td>Dirección</td>
</tr>
</tbody></table>

<h3 id="totales">Totales</h3>

<p>Obtiene información de los valores totales de la facturas</p>
<pre class="highlight sql"><code><span class="n">invoice_totals</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">total_sin_impuestos</span><span class="p">,</span>
  <span class="n">importe_total</span><span class="p">,</span>
  <span class="n">propina</span><span class="p">,</span>
  <span class="n">descuento</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoFactura</span><span class="p">.</span><span class="n">cabecera</span>
  <span class="k">WHERE</span>
  <span class="n">id_factura</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>total_sin_impuestos</td>
<td>float</td>
<td>Total antes de los impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>importe_total</td>
<td>float</td>
<td>Total incluyendo impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>propina</td>
<td>float</td>
<td>Propina total, llamado también servicio. <strong>Requerido</strong></td>
</tr>
<tr>
<td>descuento</td>
<td>float</td>
<td>Suma de los descuentos de cada ítem y del descuento adicional. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="impuestos-de-totales">Impuestos de totales</h3>

<p>Obtiene información de los impuestos de los totales de la factura</p>
<pre class="highlight sql"><code><span class="n">invoice_totals_taxes</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">codigo</span><span class="p">,</span>
  <span class="n">codigo_porcentaje</span><span class="p">,</span>
  <span class="n">base_imponible</span><span class="p">,</span>
  <span class="n">valor</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoFactura</span><span class="p">.</span><span class="n">totales_impuestos</span>
  <span class="k">WHERE</span>
  <span class="n">id_factura</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código del <a href="#tipos-de-impuesto">tipo de impuesto</a> <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_porcentaje</td>
<td>string</td>
<td>Código del <a href="#c-digo-de-porcentaje-de-iva">porcentaje</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>base_imponible</td>
<td>float</td>
<td>Base imponible. <strong>Requerido</strong></td>
</tr>
<tr>
<td>valor</td>
<td>float</td>
<td>Valor del total. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="items">Items</h3>

<p>Obtiene todos los items de una factura</p>
<pre class="highlight sql"><code><span class="n">items</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">id_detalle</span><span class="p">,</span>
  <span class="n">codigo_principal</span><span class="p">,</span>
  <span class="n">codigo_auxiliar</span><span class="p">,</span>
  <span class="n">descripcion</span><span class="p">,</span>
  <span class="n">cantidad</span><span class="p">,</span>
  <span class="n">precio_unitario</span><span class="p">,</span>
  <span class="n">descuento</span><span class="p">,</span>
  <span class="n">precio_total_sin_impuestos</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoFactura</span><span class="p">.</span><span class="n">items</span>
  <span class="k">WHERE</span>
  <span class="n">id_factura</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id_detalle</td>
<td>string</td>
<td>Identifica de manera única el ítem o detalle de la factura. Si no hay un solo campo que lo identifique de manera única se debe usar la concatenación de varios.<strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_principal</td>
<td>string</td>
<td>Código alfanumérico de uso del comercio. Máximo 25 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_auxiliar</td>
<td>string</td>
<td>Código alfanumérico de uso del comercio. Máximo 25 caracteres.</td>
</tr>
<tr>
<td>descripcion</td>
<td>string</td>
<td>Descripción del ítem. <strong>Requerido</strong></td>
</tr>
<tr>
<td>cantidad</td>
<td>float</td>
<td>Cantidad de items. <strong>Requerido</strong></td>
</tr>
<tr>
<td>precio_unitario</td>
<td>float</td>
<td>Precio unitario. <strong>Requerido</strong></td>
</tr>
<tr>
<td>descuento</td>
<td>float</td>
<td>El descuento es aplicado por cada producto. <strong>Requerido</strong></td>
</tr>
<tr>
<td>precio_total_sin_impuestos</td>
<td>float</td>
<td>Precio antes de los impuestos. Se obtiene multiplicando la <code class="prettyprint">cantidad</code> por el <code class="prettyprint">precio_unitario</code> <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="impuestos-de-items">Impuestos de items</h3>

<p>Obtiene los impuestos de un item</p>
<pre class="highlight sql"><code><span class="n">item_taxes</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">base_imponible</span><span class="p">,</span>
  <span class="n">valor</span><span class="p">,</span>
  <span class="n">tarifa</span><span class="p">,</span>
  <span class="n">codigo</span><span class="p">,</span>
  <span class="n">codigo_porcentaje</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoFactura</span><span class="p">.</span><span class="n">items_impuestos</span>
  <span class="k">WHERE</span>
  <span class="n">id_detalle</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>base_imponible</td>
<td>float</td>
<td>Base imponible. <strong>Requerido</strong></td>
</tr>
<tr>
<td>valor</td>
<td>float</td>
<td>Valor del total. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tarifa</td>
<td>float</td>
<td>Porcentaje actual del impuesto expresado por un número entre 0.0 y 100.0 <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código del <a href="#tipos-de-impuesto">tipo de impuesto</a> <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_porcentaje</td>
<td>string</td>
<td>Código del <a href="#c-digo-de-porcentaje-de-iva">porcentaje</a>. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="detalles-adicionales-de-items">Detalles adicionales de items</h3>

<p>Obtiene los detalles adicionales de un ítem. Este query es opcional.</p>

<p>Los detalles adicionales de un ítem se manejan de la forma &lsquo;Clave&rsquo;:&#39;Valor&rsquo;. Ejemplo: &#39;Peso&rsquo;:&#39;Kg&rsquo;</p>

<p>Se asume que en la tabla consultada
una columna tiene los nombres y otra los valores.</p>

<p>Ejemplo de columnas con detalles adicionales del ítem:</p>

<table><thead>
<tr>
<th>columna_de_nombres</th>
<th>columna_de_valores</th>
</tr>
</thead><tbody>
<tr>
<td>Peso</td>
<td>KG</td>
</tr>
<tr>
<td>Color</td>
<td>Rojo</td>
</tr>
<tr>
<td>Caducidad</td>
<td>10 días</td>
</tr>
</tbody></table>
<pre class="highlight sql"><code><span class="n">item_details</span> <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">columna_de_nombres</span>    <span class="n">nombre</span><span class="p">,</span>
  <span class="n">columna_de_valores</span>   <span class="n">valor</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoFactura</span><span class="p">.</span><span class="n">items_detalles_adicionales</span>
  <span class="k">WHERE</span>
  <span class="n">id_detalle</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>nombre</td>
<td>string</td>
<td>Nombre del detalle adicional del ítem</td>
</tr>
<tr>
<td>valor</td>
<td>string</td>
<td>Valor del detalle adicional del ítem</td>
</tr>
</tbody></table>

<h3 id="informaci-n-adicional">Información adicional</h3>

<p>Obtiene la información adicional de la factura.</p>

<p>La información adicional de la factura se maneja de la forma &#39;Clave&rsquo;:&#39;Valor&rsquo;. Ejemplo: &#39;Tipo de pago&rsquo;:&#39;Cheque&rsquo;</p>

<p>Se asume que en la tabla consultada
una columna tiene los nombres y otra los valores.</p>

<p>Ejemplo de columnas con información adicional de la factura:</p>

<table><thead>
<tr>
<th>columna_de_nombres</th>
<th>columna_de_valores</th>
</tr>
</thead><tbody>
<tr>
<td>Tipo de servicio</td>
<td>Avanzado</td>
</tr>
<tr>
<td>Forma de pago</td>
<td>Cheque</td>
</tr>
<tr>
<td>Periodo</td>
<td>3 meses</td>
</tr>
</tbody></table>
<pre class="highlight sql"><code><span class="n">invoice_additional_information</span> <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">columna_de_nombres</span>    <span class="n">_nombre_</span><span class="p">,</span>
  <span class="n">columna_de_valores</span>     <span class="n">_valor_</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoFactura</span><span class="p">.</span><span class="n">informacion_adicional</span>
  <span class="k">WHERE</span>
  <span class="n">id_factura</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">_nombre_</code></td>
<td>string</td>
<td>Nombre de la información adicional de la factura</td>
</tr>
<tr>
<td><code class="prettyprint">_valor_</code></td>
<td>string</td>
<td>Valor de la información adicional de la factura</td>
</tr>
</tbody></table>

<h3 id="pagos">Pagos</h3>

<p>Obtiene la información de los pagos aplicables a la factura.</p>
<pre class="highlight sql"><code><span class="n">payment_methods</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">id_pago</span><span class="p">,</span>
  <span class="n">medio_pago</span> <span class="n">medio</span><span class="p">,</span>
  <span class="n">total_pago</span> <span class="n">total</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoFactura</span><span class="p">.</span><span class="n">pagos</span>
  <span class="k">WHERE</span>
  <span class="n">id_factura</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>medio</td>
<td>string</td>
<td>Código del <a href="#tipos-de-forma-de-pago">tipo de forma de pago</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>total</td>
<td>float</td>
<td>Total aplicable a la forma de pago especificada. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="propiedades-de-pagos">Propiedades de Pagos</h3>

<p>Obtiene la propiedades de los pagos de determinada factura.</p>

<p>Las propiedades de los pagos se manejan de la forma &#39;Clave&rsquo;:&#39;Valor&rsquo;. Ejemplo: &#39;Plazo&rsquo;:&#39;5&rsquo;</p>

<p>Se asume que en la tabla consultada una columna tiene los nombres y otra los valores.</p>

<p>Ejemplo de columnas con propiedades de los pagos:</p>

<table><thead>
<tr>
<th>columna_de_nombres</th>
<th>columna_de_valores</th>
</tr>
</thead><tbody>
<tr>
<td>plazo</td>
<td>9</td>
</tr>
<tr>
<td>unidad_tiempo</td>
<td>dias</td>
</tr>
</tbody></table>
<pre class="highlight sql"><code><span class="n">payment_method_properties</span> <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">columna_de_nombres</span>    <span class="n">_nombre_</span><span class="p">,</span>
  <span class="n">columna_de_valores</span>     <span class="n">_valor_</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoFactura</span><span class="p">.</span><span class="n">propiedades_pagos</span>
  <span class="k">WHERE</span>
  <span class="n">id_pago</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">_nombre_</code></td>
<td>string</td>
<td>Nombre de la propiedad del pago</td>
</tr>
<tr>
<td><code class="prettyprint">_valor_</code></td>
<td>string</td>
<td>Valor de la propiedad del pago</td>
</tr>
</tbody></table>

<p>Para el Servicio de Rentas Internas de Ecuador (SRI), las únicas propiedades que se tomarán en cuenta son <code class="prettyprint">plazo</code> (especifica el plazo del tipo de pago) y <code class="prettyprint">unidad_tiempo</code> (especifica la unidad de tiempo en la cual se expresa el plazo).</p>

<p>Las demás propiedades que se especifiquen se registrarán en Dátil como parte del pago, pero no se reportarán al SRI.</p>

<h3 id="tablas-recomendadas">Tablas recomendadas</h3>

<p>Estructura recomendada para las tablas o vistas con información de la factura. </p>

<p>Ejemplo en SQL Server:</p>
<pre class="highlight sql"><code><span class="c1">-- FACTURA: CABECERA
</span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="p">[</span><span class="n">DocElectronicoFactura</span><span class="p">].[</span><span class="n">cabecera</span><span class="p">](</span>
    <span class="p">[</span><span class="n">id_factura</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">17</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>

    <span class="p">[</span><span class="n">ambiente</span><span class="p">]</span> <span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">tipo_emision</span><span class="p">]</span> <span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">secuencial</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">9</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">fecha_emision</span><span class="p">]</span> <span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="k">NULL</span><span class="p">,</span>    
    <span class="p">[</span><span class="n">moneda</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">15</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">guia_remision</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">17</span><span class="p">),</span>
    <span class="p">[</span><span class="n">clave_acceso</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">49</span><span class="p">),</span>
    <span class="c1">-- EMISOR
</span>    <span class="p">[</span><span class="n">ruc_emisor</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">13</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">obligado_contabilidad</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">2</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">contribuyente_especial</span><span class="p">]</span> <span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">nombre_comercial</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">300</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">razon_social</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">300</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">direccion_matriz</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">300</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">codigo_establecimiento</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">3</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">punto_emision</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">3</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">direccion_establecimiento</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">300</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="c1">-- COMPRADOR
</span>    <span class="p">[</span><span class="n">email_comprador</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">100</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">identificacion_comprador</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">200</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">tipo_identificacion_comprador</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">2</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">razon_social_comprador</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">200</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">direccion_comprador</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">200</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">telefono_comprador</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">200</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="c1">-- TOTALES
</span>    <span class="p">[</span><span class="n">total_sin_impuestos</span><span class="p">]</span> <span class="p">[</span><span class="n">decimal</span><span class="p">](</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">importe_total</span><span class="p">]</span> <span class="p">[</span><span class="n">decimal</span><span class="p">](</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">propina</span><span class="p">]</span> <span class="p">[</span><span class="n">decimal</span><span class="p">](</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">descuento</span><span class="p">]</span> <span class="p">[</span><span class="n">decimal</span><span class="p">](</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NULL</span>
 <span class="k">CONSTRAINT</span> <span class="p">[</span><span class="n">PK_factura</span><span class="p">]</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="n">CLUSTERED</span> 
    <span class="p">(</span> <span class="p">[</span><span class="n">id_factura</span><span class="p">]</span> <span class="k">ASC</span> <span class="p">)</span> <span class="p">)</span>

<span class="c1">-- FACTURA: ITEMS
</span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="p">[</span><span class="n">DocElectronicoFactura</span><span class="p">].[</span><span class="n">items</span><span class="p">](</span>
    <span class="p">[</span><span class="n">id_factura</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">17</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">detalle</span><span class="p">]</span> <span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>

    <span class="p">[</span><span class="n">cantidad</span><span class="p">]</span> <span class="p">[</span><span class="n">decimal</span><span class="p">](</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>  <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">codigo_principal</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">50</span><span class="p">)</span>  <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">codigo_auxiliar</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">50</span><span class="p">)</span>  <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">precio_unitario</span><span class="p">]</span> <span class="p">[</span><span class="n">decimal</span><span class="p">](</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>  <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">descripcion</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">300</span><span class="p">)</span>  <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">precio_total_sin_impuestos</span><span class="p">]</span> <span class="p">[</span><span class="n">decimal</span><span class="p">](</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>  <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">descuento</span><span class="p">]</span> <span class="p">[</span><span class="n">decimal</span><span class="p">](</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>  <span class="k">NULL</span>
    <span class="k">CONSTRAINT</span> <span class="n">pk_items</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">id_factura</span><span class="p">,</span><span class="n">detalle</span><span class="p">)</span>
    <span class="p">)</span>

<span class="c1">-- FACTURA: IMPUESTOS DE ITEMS 
</span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="p">[</span><span class="n">DocElectronicoFactura</span><span class="p">].[</span><span class="n">items_impuestos</span><span class="p">](</span>
    <span class="p">[</span><span class="n">id_factura</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">17</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">detalle</span><span class="p">]</span> <span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">codigo</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>

    <span class="p">[</span><span class="n">base_imponible</span><span class="p">]</span> <span class="p">[</span><span class="n">decimal</span><span class="p">](</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">valor</span><span class="p">]</span> <span class="p">[</span><span class="n">decimal</span><span class="p">](</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">tarifa</span><span class="p">]</span> <span class="p">[</span><span class="n">decimal</span><span class="p">](</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span> <span class="c1">-- porcentaje
</span>    <span class="p">[</span><span class="n">codigo_porcentaje</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
    <span class="k">CONSTRAINT</span> <span class="n">pk_items_impuestos</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">id_factura</span><span class="p">,</span><span class="n">detalle</span><span class="p">,</span> <span class="n">codigo</span><span class="p">)</span>
    <span class="p">)</span>

<span class="c1">-- FACTURA: DETALLES ADICIONALES DE ITEMS
</span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="p">[</span><span class="n">DocElectronicoFactura</span><span class="p">].[</span><span class="n">items_detalles_adicionales</span><span class="p">](</span>
    <span class="p">[</span><span class="n">id_factura</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">17</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">detalle</span><span class="p">]</span> <span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">nombre</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">100</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>

    <span class="p">[</span><span class="n">valor</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">100</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
    <span class="k">CONSTRAINT</span> <span class="n">pk_items_detalles_adicionales</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">id_factura</span><span class="p">,</span><span class="n">detalle</span><span class="p">,</span> <span class="n">nombre</span><span class="p">)</span>
    <span class="p">)</span>

<span class="c1">-- FACTURA: IMPUESTOS DE TOTALES 
</span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="p">[</span><span class="n">DocElectronicoFactura</span><span class="p">].[</span><span class="n">totales_impuestos</span><span class="p">](</span>
    <span class="p">[</span><span class="n">id_factura</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">17</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">orden</span><span class="p">]</span> <span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>

    <span class="p">[</span><span class="n">base_imponible</span><span class="p">]</span> <span class="p">[</span><span class="n">decimal</span><span class="p">](</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">valor</span><span class="p">]</span> <span class="p">[</span><span class="n">decimal</span><span class="p">](</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">codigo</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">codigo_porcentaje</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
    <span class="k">CONSTRAINT</span> <span class="n">pk_totales_impuestos</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">id_factura</span><span class="p">,</span> <span class="n">orden</span><span class="p">)</span>
    <span class="p">)</span>

<span class="c1">-- FACTURA: INFORMACION ADICIONAL DE LA FACTURA
</span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="p">[</span><span class="n">DocElectronicoFactura</span><span class="p">].[</span><span class="n">informacion_adicional</span><span class="p">](</span>
    <span class="p">[</span><span class="n">id_factura</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">17</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="p">[</span><span class="n">nombre</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">100</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>

    <span class="p">[</span><span class="n">valor</span><span class="p">]</span> <span class="p">[</span><span class="n">varchar</span><span class="p">](</span><span class="mi">100</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
    <span class="k">CONSTRAINT</span> <span class="n">pk_informacion_adicional</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">id_factura</span><span class="p">,</span> <span class="n">nombre</span><span class="p">)</span>
    <span class="p">)</span>   


</code></pre>

<h2 id="notas-de-cr-dito">Notas de crédito</h2>

<p>Los queries para la emisión electrónica de <strong>notas de crédito</strong> se guardan en el archivo de configuración <code class="prettyprint">credit_note.ini</code>.</p>

<p><a href="/link-app#credit_note-ini">Ejemplo de archivo credit_note.ini</a></p>

<h3 id="cabecera">Cabecera</h3>

<p>Obtiene información de la cabecera de la nota de crédito</p>
<pre class="highlight sql"><code><span class="n">headers</span> <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">id_nota_credito</span>             <span class="n">id_local</span><span class="p">,</span>
  <span class="n">secuencial</span><span class="p">,</span>
  <span class="n">fecha_emision</span><span class="p">,</span>
  <span class="n">moneda</span><span class="p">,</span>
  <span class="n">clave_acceso</span><span class="p">,</span>
  <span class="n">tipo_emision</span><span class="p">,</span>
  <span class="n">fecha_emision_documento_modificado</span><span class="p">,</span>
  <span class="n">numero_documento_modificado</span><span class="p">,</span>
  <span class="n">tipo_documento_modificado</span><span class="p">,</span>
  <span class="n">motivo</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoNotaCredito</span><span class="p">.</span><span class="n">cabecera</span>
  <span class="k">WHERE</span>
  <span class="n">id_nota_credito</span> <span class="k">in</span> <span class="p">(:</span><span class="n">sequence</span><span class="p">)</span>
  <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">id_nota_credito</span> <span class="p">:</span><span class="k">order</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Descripción</th>
<th>Valor de ejemplo</th>
</tr>
</thead><tbody>
<tr>
<td>id_local</td>
<td>string</td>
<td>Identifica de manera única la nota de crédito. <strong>Requerido</strong></td>
</tr>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la nota de crédito. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>datetime</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.  <strong>Requerido</strong></td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda. <strong>Requerido</strong></td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code class="prettyprint">1</code>.<br>Emisión por indisponibilidad: <code class="prettyprint">2</code><br><strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision_documento_modificado</td>
<td>datetime</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria del documento modificado, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.  <strong>Requerido</strong></td>
</tr>
<tr>
<td>numero_documento_modificado</td>
<td>string</td>
<td>Número completo del documento que se está afectando. Normalmente facturas. Ejm: 001-002-010023098 <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_documento_modificado</td>
<td>string</td>
<td>Códigos de <a href="#tipos-de-documentos">tipos de documentos</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>motivo</td>
<td>string</td>
<td>Motivo de la operación. Ejm: Devolución de producto. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="vendedor">Vendedor</h3>

<p>Obtiene información del vendedor en la nota de crédito</p>
<pre class="highlight sql"><code><span class="n">credit_note_seller</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">ruc</span><span class="p">,</span>
  <span class="n">obligado_contabilidad</span><span class="p">,</span>
  <span class="n">contribuyente_especial</span><span class="p">,</span>
  <span class="n">nombre_comercial</span><span class="p">,</span>
  <span class="n">razon_social</span><span class="p">,</span>
  <span class="n">direccion_establecimiento</span><span class="p">,</span>
  <span class="n">direccion_emisor</span><span class="p">,</span>
  <span class="n">codigo</span><span class="p">,</span>
  <span class="n">punto_emision</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoNotaCredito</span><span class="p">.</span><span class="n">cabecera</span>
  <span class="k">WHERE</span>
  <span class="n">id_nota_credito</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>ruc</td>
<td>string</td>
<td>Número de RUC de 13 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>obligado_contabilidad</td>
<td>string</td>
<td><code class="prettyprint">&#39;SI&#39;</code> si está obligado a llevar contabilidad. <code class="prettyprint">&#39;NO&#39;</code> si no lo está.</td>
</tr>
<tr>
<td>contribuyente_especial</td>
<td>string</td>
<td>Número de resolución. En blanco <code class="prettyprint">&#39;&#39;</code> si no es contribuyente especial.</td>
</tr>
<tr>
<td>nombre_comercial</td>
<td>string</td>
<td>Nombre comercial. Máximo 300 caracteres <strong>Requerido</strong></td>
</tr>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social. Máximo 300 caracteres <strong>Requerido</strong></td>
</tr>
<tr>
<td>direccion_establecimiento</td>
<td>string</td>
<td>Dirección registrada en el SRI. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>direccion_emisor</td>
<td>string</td>
<td>Dirección del punto de emisión. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código numérico de 3 caracteres que representa al establecimiento. Ejemplo: <code class="prettyprint">001</code> <strong>Requerido</strong></td>
</tr>
<tr>
<td>punto_emision</td>
<td>string</td>
<td>Código numérico de 3 caracteres que representa al punto de emisión, o punto de venta. Ejemplo: <code class="prettyprint">001</code>. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="comprador">Comprador</h3>

<p>Obtiene información del comprador en la nota de crédito</p>
<pre class="highlight sql"><code><span class="n">credit_note_buyer</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">identificacion</span><span class="p">,</span>
  <span class="n">tipo_identificacion</span><span class="p">,</span>
  <span class="n">razon_social</span><span class="p">,</span>
  <span class="n">direccion</span><span class="p">,</span>
  <span class="n">email</span><span class="p">,</span>
  <span class="n">telefono</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoNotaCredito</span><span class="p">.</span><span class="n">cabecera</span>
  <span class="k">WHERE</span>
  <span class="n">id_nota_credito</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>identificacion</td>
<td>string</td>
<td>De 5 a 20 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_identificacion</td>
<td>string</td>
<td>Ver <a href="#tipo-de-identificaci-n">tabla</a> de tipos de identificación <strong>Requerido</strong></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Correo electrónico. Máximo 300 caracteres.</td>
</tr>
<tr>
<td>telefono</td>
<td>string</td>
<td>Teléfono</td>
</tr>
<tr>
<td>direccion</td>
<td>string</td>
<td>Dirección</td>
</tr>
</tbody></table>

<h3 id="totales">Totales</h3>

<p>Obtiene información de los valores totales de la nota de crédito</p>
<pre class="highlight sql"><code><span class="n">credit_note_totals</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">total_sin_impuestos</span><span class="p">,</span>
  <span class="n">importe_total</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoNotaCredito</span><span class="p">.</span><span class="n">cabecera</span>
  <span class="k">WHERE</span>
  <span class="n">id_nota_credito</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>total_sin_impuestos</td>
<td>float</td>
<td>Total antes de los impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>importe_total</td>
<td>float</td>
<td>Total incluyendo impuestos. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="impuestos-de-totales">Impuestos de totales</h3>

<p>Obtiene información de los impuestos de los totales de la nota de crédito</p>
<pre class="highlight sql"><code><span class="n">credit_note_totals_taxes</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">codigo</span><span class="p">,</span>
  <span class="n">codigo_porcentaje</span><span class="p">,</span>
  <span class="n">base_imponible</span><span class="p">,</span>
  <span class="n">valor</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoNotaCredito</span><span class="p">.</span><span class="n">totales_impuestos</span>
  <span class="k">WHERE</span>
  <span class="n">id_nota_credito</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código del <a href="#tipos-de-impuesto">tipo de impuesto</a> <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_porcentaje</td>
<td>string</td>
<td>Código del <a href="#c-digo-de-porcentaje-de-iva">porcentaje</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>base_imponible</td>
<td>float</td>
<td>Base imponible. <strong>Requerido</strong></td>
</tr>
<tr>
<td>valor</td>
<td>float</td>
<td>Valor del total. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="items">Items</h3>

<p>Obtiene todos los items de una nota de crédito</p>
<pre class="highlight sql"><code><span class="n">items</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">id_detalle</span><span class="p">,</span>
  <span class="n">codigo_principal</span><span class="p">,</span>
  <span class="n">codigo_auxiliar</span><span class="p">,</span>
  <span class="n">descripcion</span><span class="p">,</span>
  <span class="n">cantidad</span><span class="p">,</span>
  <span class="n">precio_unitario</span><span class="p">,</span>
  <span class="n">descuento</span><span class="p">,</span>
  <span class="n">precio_total_sin_impuestos</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoNotaCredito</span><span class="p">.</span><span class="n">items</span>
  <span class="k">WHERE</span>
  <span class="n">id_nota_credito</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id_detalle</td>
<td>string</td>
<td>Identifica de manera única el ítem o detalle de la nota de crédito. Si no hay un solo campo que lo identifique de manera única se debe usar la concatenación de varios.<strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_principal</td>
<td>string</td>
<td>Código alfanumérico de uso del comercio. Máximo 25 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_auxiliar</td>
<td>string</td>
<td>Código alfanumérico de uso del comercio. Máximo 25 caracteres.</td>
</tr>
<tr>
<td>descripcion</td>
<td>string</td>
<td>Descripción del ítem. <strong>Requerido</strong></td>
</tr>
<tr>
<td>cantidad</td>
<td>float</td>
<td>Cantidad de items. <strong>Requerido</strong></td>
</tr>
<tr>
<td>precio_unitario</td>
<td>float</td>
<td>Precio unitario. <strong>Requerido</strong></td>
</tr>
<tr>
<td>descuento</td>
<td>float</td>
<td>El descuento es aplicado por cada producto. <strong>Requerido</strong></td>
</tr>
<tr>
<td>precio_total_sin_impuestos</td>
<td>float</td>
<td>Precio antes de los impuestos. Se obtiene multiplicando la <code class="prettyprint">cantidad</code> por el <code class="prettyprint">precio_unitario</code> <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="impuestos-de-items">Impuestos de items</h3>

<p>Obtiene los impuestos de un item</p>
<pre class="highlight sql"><code><span class="n">item_taxes</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">base_imponible</span><span class="p">,</span>
  <span class="n">valor</span><span class="p">,</span>
  <span class="n">tarifa</span><span class="p">,</span>
  <span class="n">codigo</span><span class="p">,</span>
  <span class="n">codigo_porcentaje</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoNotaCredito</span><span class="p">.</span><span class="n">items_impuestos</span>
  <span class="k">WHERE</span>
  <span class="n">id_detalle</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>base_imponible</td>
<td>float</td>
<td>Base imponible. <strong>Requerido</strong></td>
</tr>
<tr>
<td>valor</td>
<td>float</td>
<td>Valor del total. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tarifa</td>
<td>float</td>
<td>Porcentaje actual del impuesto expresado por un número entre 0.0 y 100.0 <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código del <a href="#tipos-de-impuesto">tipo de impuesto</a> <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_porcentaje</td>
<td>string</td>
<td>Código del <a href="#c-digo-de-porcentaje-de-iva">porcentaje</a>. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="detalles-adicionales-de-items">Detalles adicionales de items</h3>

<p>Obtiene los detalles adicionales de un ítem. Este query es opcional.</p>

<p>Los detalles adicionales de un ítem se manejan de la forma &#39;Clave&rsquo;:&#39;Valor&rsquo;. Ejemplo: &#39;Peso&rsquo;:&#39;Kg&rsquo;</p>

<p>Se asume que en la tabla consultada
una columna tiene los nombres y otra los valores.</p>

<p>Ejemplo de columnas con detalles adicionales del ítem:</p>

<table><thead>
<tr>
<th>columna_de_nombres</th>
<th>columna_de_valores</th>
</tr>
</thead><tbody>
<tr>
<td>Peso</td>
<td>KG</td>
</tr>
<tr>
<td>Color</td>
<td>Rojo</td>
</tr>
<tr>
<td>Caducidad</td>
<td>10 días</td>
</tr>
</tbody></table>
<pre class="highlight sql"><code><span class="n">item_details</span> <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">columna_de_nombres</span>    <span class="n">_nombre_</span><span class="p">,</span>
  <span class="n">columna_de_valores</span>   <span class="n">_valor_</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoNotaCredito</span><span class="p">.</span><span class="n">items_detalles_adicionales</span>
  <span class="k">WHERE</span>
  <span class="n">id_detalle</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>nombre</td>
<td>string</td>
<td>Nombre del detalle adicional del ítem</td>
</tr>
<tr>
<td>valor</td>
<td>string</td>
<td>Valor del detalle adicional del ítem</td>
</tr>
</tbody></table>

<h3 id="informaci-n-adicional">Información adicional</h3>

<p>Obtiene la información adicional de la nota de crédito.</p>

<p>La información adicional de la nota de crédito se maneja de la forma &#39;Clave&rsquo;:&#39;Valor&rsquo;. Ejemplo: &#39;Tipo de pago&rsquo;:&#39;Cheque&rsquo;</p>

<p>Se asume que en la tabla consultada
una columna tiene los nombres y otra los valores.</p>

<p>Ejemplo de columnas con información adicional de la nota de crédito:</p>

<table><thead>
<tr>
<th>columna_de_nombres</th>
<th>columna_de_valores</th>
</tr>
</thead><tbody>
<tr>
<td>Tipo de servicio</td>
<td>Avanzado</td>
</tr>
<tr>
<td>Forma de pago</td>
<td>Cheque</td>
</tr>
<tr>
<td>Periodo</td>
<td>3 meses</td>
</tr>
</tbody></table>
<pre class="highlight sql"><code><span class="n">credit_note_additional_information</span> <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">columna_de_nombres</span>    <span class="n">_nombre_</span><span class="p">,</span>
  <span class="n">columna_de_valores</span>     <span class="n">_valor_</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoNotaCredito</span><span class="p">.</span><span class="n">informacion_adicional</span>
  <span class="k">WHERE</span>
  <span class="n">id_nota_credito</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">_nombre_</code></td>
<td>string</td>
<td>Nombre de la información adicional de la nota de crédito</td>
</tr>
<tr>
<td><code class="prettyprint">_valor_</code></td>
<td>string</td>
<td>Valor de la información adicional de la nota de crédito</td>
</tr>
</tbody></table>

<h3 id="tablas-recomendadas">Tablas recomendadas</h3>

<p>Estructura recomendada para las tablas o vistas con información de la nota de crédito. </p>

<p>Ejemplo en SQL Server:</p>

<p>Pendiente</p>

<h2 id="comprobantes-de-retenci-n">Comprobantes de Retención</h2>

<p>Los queries para la emisión electrónica de <strong>retención</strong> se guardan en el archivo de configuración <code class="prettyprint">retention.ini</code>.</p>

<p><a href="/link-app#retention-ini">Ejemplo de archivo retention.ini</a></p>

<h3 id="cabecera">Cabecera</h3>

<p>Obtiene información de la cabecera de la retención</p>
<pre class="highlight sql"><code><span class="n">headers</span> <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">id_nota_credito</span>             <span class="n">id_local</span><span class="p">,</span>
  <span class="n">secuencial</span><span class="p">,</span>
  <span class="n">fecha_emision</span><span class="p">,</span>
  <span class="n">clave_acceso</span><span class="p">,</span>
  <span class="n">tipo_emision</span><span class="p">,</span>
  <span class="n">periodo_fiscal</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoRetencion</span><span class="p">.</span><span class="n">cabecera</span>
  <span class="k">WHERE</span>
  <span class="n">id_retencion</span> <span class="k">in</span> <span class="p">(:</span><span class="n">sequence</span><span class="p">)</span>
  <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">id_retencion</span> <span class="p">:</span><span class="k">order</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Descripción</th>
<th>Valor de ejemplo</th>
</tr>
</thead><tbody>
<tr>
<td>id_local</td>
<td>string</td>
<td>Identifica de manera única la retención. <strong>Requerido</strong></td>
</tr>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la retención. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>datetime</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.  <strong>Requerido</strong></td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code class="prettyprint">1</code>.<br>Emisión por indisponibilidad: <code class="prettyprint">2</code><br><strong>Requerido</strong></td>
</tr>
<tr>
<td>periodo_fiscal</td>
<td>string</td>
<td>Mes y año en el siguiente formato MM/AAAA. Ejm: 12/2015 <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="vendedor">Vendedor</h3>

<p>Obtiene información del vendedor en la retención</p>
<pre class="highlight sql"><code><span class="n">retention_seller</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">ruc</span><span class="p">,</span>
  <span class="n">obligado_contabilidad</span><span class="p">,</span>
  <span class="n">contribuyente_especial</span><span class="p">,</span>
  <span class="n">nombre_comercial</span><span class="p">,</span>
  <span class="n">razon_social</span><span class="p">,</span>
  <span class="n">direccion_establecimiento</span><span class="p">,</span>
  <span class="n">direccion_emisor</span><span class="p">,</span>
  <span class="n">codigo</span><span class="p">,</span>
  <span class="n">punto_emision</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoRetencion</span><span class="p">.</span><span class="n">cabecera</span>
  <span class="k">WHERE</span>
  <span class="n">id_retencion</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>ruc</td>
<td>string</td>
<td>Número de RUC de 13 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>obligado_contabilidad</td>
<td>string</td>
<td><code class="prettyprint">&#39;SI&#39;</code> si está obligado a llevar contabilidad. <code class="prettyprint">&#39;NO&#39;</code> si no lo está.</td>
</tr>
<tr>
<td>contribuyente_especial</td>
<td>string</td>
<td>Número de resolución. En blanco <code class="prettyprint">&#39;&#39;</code> si no es contribuyente especial.</td>
</tr>
<tr>
<td>nombre_comercial</td>
<td>string</td>
<td>Nombre comercial. Máximo 300 caracteres <strong>Requerido</strong></td>
</tr>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social. Máximo 300 caracteres <strong>Requerido</strong></td>
</tr>
<tr>
<td>direccion_establecimiento</td>
<td>string</td>
<td>Dirección registrada en el SRI. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>direccion_emisor</td>
<td>string</td>
<td>Dirección del punto de emisión. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código numérico de 3 caracteres que representa al establecimiento. Ejemplo: <code class="prettyprint">001</code> <strong>Requerido</strong></td>
</tr>
<tr>
<td>punto_emision</td>
<td>string</td>
<td>Código numérico de 3 caracteres que representa al punto de emisión, o punto de venta. Ejemplo: <code class="prettyprint">001</code>. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="sujeto-retenido">Sujeto retenido</h3>

<p>Obtiene información del sujeto retenido en la retención</p>
<pre class="highlight sql"><code><span class="n">retention_recipient</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">identificacion</span><span class="p">,</span>
  <span class="n">tipo_identificacion</span><span class="p">,</span>
  <span class="n">razon_social</span><span class="p">,</span>
  <span class="n">direccion</span><span class="p">,</span>
  <span class="n">email</span><span class="p">,</span>
  <span class="n">telefono</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoRetencion</span><span class="p">.</span><span class="n">cabecera</span>
  <span class="k">WHERE</span>
  <span class="n">id_retencion</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>identificacion</td>
<td>string</td>
<td>De 5 a 20 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_identificacion</td>
<td>string</td>
<td>Ver <a href="#tipo-de-identificaci-n">tabla</a> de tipos de identificación <strong>Requerido</strong></td>
</tr>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>direccion</td>
<td>string</td>
<td>Dirección</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Correo electrónico. Máximo 300 caracteres.</td>
</tr>
<tr>
<td>telefono</td>
<td>string</td>
<td>Teléfono</td>
</tr>
</tbody></table>

<h3 id="impuestos-de-la-retenci-n">Impuestos de la retención</h3>

<p>Obtiene información de los impuestos de la retención</p>
<pre class="highlight sql"><code><span class="n">retention_taxes</span>  <span class="o">=</span> <span class="k">SELECT</span>
    <span class="n">codigo</span><span class="p">,</span>
    <span class="n">codigo_porcentaje</span><span class="p">,</span>
    <span class="n">porcentaje</span><span class="p">,</span>
    <span class="n">base_imponible</span><span class="p">,</span>
    <span class="n">valor_retenido</span><span class="p">,</span>
    <span class="n">tipo_documento_sustento</span><span class="p">,</span>
    <span class="n">numero_documento_sustento</span><span class="p">,</span>
    <span class="n">fecha_emision_documento_sustento</span>
    <span class="k">FROM</span> 
    <span class="n">DocElectronicoRetencion</span><span class="p">.</span><span class="n">impuesto</span>
    <span class="k">WHERE</span>
    <span class="n">id_retencion</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código de <a href="#tipos-de-impuesto-para-la-retenci-n">tipo de impuesto</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_porcentaje</td>
<td>string</td>
<td><a href="#retenci-n-de-iva">Código del porcentaje</a> a aplicar dentro del tipo de impuesto <strong>Requerido</strong></td>
</tr>
<tr>
<td>porcentaje</td>
<td>string</td>
<td>Porcentaje a retener <strong>Requerido</strong></td>
</tr>
<tr>
<td>base_imponible</td>
<td>float</td>
<td>Base imponible. <strong>Requerido</strong></td>
</tr>
<tr>
<td>valor_retenido</td>
<td>float</td>
<td>Valor retenido. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_documento_sustento</td>
<td>string</td>
<td>Códigos de <a href="#tipos-de-documentos">tipos de documentos</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>numero_documento_sustento</td>
<td>string</td>
<td>Número completo del documento que se está afectando. Normalmente facturas. Ejm: 001-002-010023098 <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision_documento_sustento</td>
<td>datetime</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria del documento sustento de la retención, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.  <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="informaci-n-adicional">Información adicional</h3>

<p>Obtiene la información adicional de la retención.</p>

<p>La información adicional de la retención se maneja de la forma &#39;Clave&rsquo;:&#39;Valor&rsquo;. Ejemplo: &#39;Tipo de pago&rsquo;:&#39;Cheque&rsquo;</p>

<p>Se asume que en la tabla consultada
una columna tiene los nombres y otra los valores.</p>

<p>Ejemplo de columnas con información adicional de la retención:</p>

<table><thead>
<tr>
<th>columna_de_nombres</th>
<th>columna_de_valores</th>
</tr>
</thead><tbody>
<tr>
<td>Tipo de servicio</td>
<td>Avanzado</td>
</tr>
<tr>
<td>Forma de pago</td>
<td>Cheque</td>
</tr>
<tr>
<td>Periodo</td>
<td>3 meses</td>
</tr>
</tbody></table>
<pre class="highlight sql"><code><span class="n">retention_additional_information</span> <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">columna_de_nombres</span>    <span class="n">_nombre_</span><span class="p">,</span>
  <span class="n">columna_de_valores</span>     <span class="n">_valor_</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoRetencion</span><span class="p">.</span><span class="n">informacion_adicional</span>
  <span class="k">WHERE</span>
  <span class="n">id_retencion</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">_nombre_</code></td>
<td>string</td>
<td>Nombre de la información adicional de la rentención</td>
</tr>
<tr>
<td><code class="prettyprint">_valor_</code></td>
<td>string</td>
<td>Valor de la información adicional de la retención</td>
</tr>
</tbody></table>

<h3 id="tablas-recomendadas">Tablas recomendadas</h3>

<p>Estructura recomendada para las tablas o vistas con información de la retención. </p>

<p>Ejemplo en SQL Server:</p>

<p>Pendiente</p>

<h2 id="gu-as-de-remisi-n">Guías de Remisión</h2>

<p>Los queries para la emisión electrónica de <strong>guías de remisión</strong> se guardan en el archivo de configuración <code class="prettyprint">waybill.ini</code>.</p>

<p><a href="/link-app#waybill-ini">Ejemplo de archivo waybill.ini</a></p>

<h3 id="cabecera">Cabecera</h3>

<p>Obtiene información de la cabecera de la guía de remisión</p>
<pre class="highlight sql"><code><span class="n">headers</span> <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">id_guia_remision</span>             <span class="n">id_local</span><span class="p">,</span>
  <span class="n">secuencial</span><span class="p">,</span>
  <span class="n">fecha_inicio_transporte</span><span class="p">,</span>
  <span class="n">fecha_fin_transporte</span><span class="p">,</span>
  <span class="n">direccion_partida</span><span class="p">,</span>
  <span class="n">clave_acceso</span><span class="p">,</span>
  <span class="n">tipo_emision</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoGuiaRemision</span><span class="p">.</span><span class="n">cabecera</span>
  <span class="k">WHERE</span>
  <span class="n">id_guia_remision</span> <span class="k">in</span> <span class="p">(:</span><span class="n">sequence</span><span class="p">)</span>
  <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">id_guia_remision</span> <span class="p">:</span><span class="k">order</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Descripción</th>
<th>Valor de ejemplo</th>
</tr>
</thead><tbody>
<tr>
<td>id_local</td>
<td>string</td>
<td>Identifica de manera única la guía de remisión. <strong>Requerido</strong></td>
</tr>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la retención. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_inicio_transporte</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.  <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_fin_transporte</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.  <strong>Requerido</strong></td>
</tr>
<tr>
<td>direccion_partida</td>
<td>string</td>
<td>Dirección de partida</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code class="prettyprint">1</code>.<br>Emisión por indisponibilidad: <code class="prettyprint">2</code><br><strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="vendedor">Vendedor</h3>

<p>Obtiene información del vendedor en la guía de remisión</p>
<pre class="highlight sql"><code><span class="n">waybill_seller</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">ruc</span><span class="p">,</span>
  <span class="n">obligado_contabilidad</span><span class="p">,</span>
  <span class="n">contribuyente_especial</span><span class="p">,</span>
  <span class="n">nombre_comercial</span><span class="p">,</span>
  <span class="n">razon_social</span><span class="p">,</span>
  <span class="n">direccion_establecimiento</span><span class="p">,</span>
  <span class="n">direccion_emisor</span><span class="p">,</span>
  <span class="n">codigo</span><span class="p">,</span>
  <span class="n">punto_emision</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoGuiaRemision</span><span class="p">.</span><span class="n">cabecera</span>
  <span class="k">WHERE</span>
  <span class="n">id_guia_remision</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>ruc</td>
<td>string</td>
<td>Número de RUC de 13 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>obligado_contabilidad</td>
<td>string</td>
<td><code class="prettyprint">&#39;SI&#39;</code> si está obligado a llevar contabilidad. <code class="prettyprint">&#39;NO&#39;</code> si no lo está.</td>
</tr>
<tr>
<td>contribuyente_especial</td>
<td>string</td>
<td>Número de resolución. En blanco <code class="prettyprint">&#39;&#39;</code> si no es contribuyente especial.</td>
</tr>
<tr>
<td>nombre_comercial</td>
<td>string</td>
<td>Nombre comercial. Máximo 300 caracteres <strong>Requerido</strong></td>
</tr>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social. Máximo 300 caracteres <strong>Requerido</strong></td>
</tr>
<tr>
<td>direccion_establecimiento</td>
<td>string</td>
<td>Dirección registrada en el SRI. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>direccion_emisor</td>
<td>string</td>
<td>Dirección del punto de emisión. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código numérico de 3 caracteres que representa al establecimiento. Ejemplo: <code class="prettyprint">001</code> <strong>Requerido</strong></td>
</tr>
<tr>
<td>punto_emision</td>
<td>string</td>
<td>Código numérico de 3 caracteres que representa al punto de emisión, o punto de venta. Ejemplo: <code class="prettyprint">001</code>. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="transportista">Transportista</h3>

<p>Obtiene información del transportista en la guía de remisión</p>
<pre class="highlight sql"><code><span class="n">waybill_shipper</span>  <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">identificacion</span><span class="p">,</span>
  <span class="n">tipo_identificacion</span><span class="p">,</span>
  <span class="n">razon_social</span><span class="p">,</span>
  <span class="n">direccion</span><span class="p">,</span>
  <span class="n">email</span><span class="p">,</span>
  <span class="n">telefono</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoGuiaRemision</span><span class="p">.</span><span class="n">cabecera</span>
  <span class="k">WHERE</span>
  <span class="n">id_guia_remision</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>identificacion</td>
<td>string</td>
<td>De 5 a 20 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_identificacion</td>
<td>string</td>
<td>Ver <a href="#tipo-de-identificaci-n">tabla</a> de tipos de identificación <strong>Requerido</strong></td>
</tr>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>direccion</td>
<td>string</td>
<td>Dirección</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Correo electrónico. Máximo 300 caracteres.</td>
</tr>
<tr>
<td>telefono</td>
<td>string</td>
<td>Teléfono</td>
</tr>
</tbody></table>

<h3 id="destinatarios">Destinatarios</h3>

<p>Obtiene información de los destinatarios en la guía de remisión</p>
<pre class="highlight sql"><code><span class="n">waybill_receivers</span>  <span class="o">=</span> <span class="k">SELECT</span>
    <span class="n">id_destinatario</span>     <span class="n">receiver_id</span><span class="p">,</span>
    <span class="n">razon_social</span><span class="p">,</span>
    <span class="n">identificacion</span><span class="p">,</span>
    <span class="n">tipo_identificacion</span><span class="p">,</span>
    <span class="n">email</span><span class="p">,</span>
    <span class="n">telefono</span><span class="p">,</span>
    <span class="n">direccion</span><span class="p">,</span>
    <span class="n">ruta</span><span class="p">,</span>
    <span class="n">documento_aduanero_unico</span><span class="p">,</span>
    <span class="n">codigo_establecimiento_destino</span><span class="p">,</span>
    <span class="n">fecha_emision_documento_sustento</span><span class="p">,</span>
    <span class="n">numero_documento_sustento</span><span class="p">,</span>
    <span class="n">tipo_documento_sustento</span><span class="p">,</span>
    <span class="n">motivo_traslado</span><span class="p">,</span>
    <span class="n">numero_autorizacion_documento_sustento</span>
    <span class="k">FROM</span>
    <span class="n">DocElectronicoGuiaRemision</span><span class="p">.</span><span class="n">destinatario</span>
    <span class="k">WHERE</span>
    <span class="n">id_guia_remision</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>receiver_id</td>
<td>string</td>
<td>Identifica de manera única al destinatario en la guía de remisión. <strong>Requerido</strong></td>
</tr>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social del destinatario. Máximo 300 caracteres <strong>Requerido</strong></td>
</tr>
<tr>
<td>identificacion</td>
<td>string</td>
<td>De 5 a 20 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_identificacion</td>
<td>string</td>
<td>Ver <a href="#tipo-de-identificaci-n">tabla</a> de tipos de identificación <strong>Requerido</strong></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Correo electrónico del destinatario. Máximo 300 caracteres.</td>
</tr>
<tr>
<td>telefono</td>
<td>string</td>
<td>Teléfono del destinatario</td>
</tr>
<tr>
<td>direccion</td>
<td>string</td>
<td>Dirección del destinatario</td>
</tr>
<tr>
<td>ruta</td>
<td>string</td>
<td>Ruta de transporte. Máximo 300 caracteres.</td>
</tr>
<tr>
<td>documento_aduanero_unico</td>
<td>string</td>
<td>Máximo 20 caracteres.</td>
</tr>
<tr>
<td>fecha_emision_documento_sustento</td>
<td>datetime</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.  <strong>Requerido</strong></td>
</tr>
<tr>
<td>numero_documento_sustento</td>
<td>string</td>
<td>Número completo del documento que detalla la mercadería a transportar. Normalmente facturas. Ejm: 001-002-010023098</td>
</tr>
<tr>
<td>codigo_establecimiento_destino</td>
<td>string</td>
<td>Número establecimiento que recibe la entrega.  <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision_documento_sustento</td>
<td>datetime</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.  <strong>Requerido</strong></td>
</tr>
<tr>
<td>numero_documento_sustento</td>
<td>string</td>
<td>Número completo del documento que detalla la mercadería a transportar. Normalmente facturas. Ejm: 001-002-010023098 <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_documento_sustento</td>
<td>string</td>
<td>tipo_documento_sustento</td>
</tr>
<tr>
<td>motivo_traslado</td>
<td>string</td>
<td>Motivo del traslado. Ejm: Entrega de mercadería. <strong>Requerido</strong></td>
</tr>
<tr>
<td>numero_autorizacion_documento_sustento</td>
<td>string</td>
<td>Autorización del documento de sustento.</td>
</tr>
</tbody></table>

<h3 id="items-del-destinatario">Items del destinatario</h3>

<p>Obtiene la información de los items que recibirá el destinatario</p>
<pre class="highlight sql"><code><span class="n">waybill_receiver_items</span> <span class="o">=</span> <span class="k">SELECT</span>
    <span class="n">id_detalle</span><span class="p">,</span>
    <span class="n">descripcion</span><span class="p">,</span>
    <span class="n">codigo_principal</span><span class="p">,</span>
    <span class="n">codigo_auxiliar</span><span class="p">,</span>
    <span class="n">cantidad</span>
    <span class="k">FROM</span>
    <span class="n">DocElectronicoGuiaRemision</span><span class="p">.</span><span class="n">detalle</span>
    <span class="k">WHERE</span>
    <span class="n">id_destinatario</span> <span class="o">=</span> <span class="o">?</span>

</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id_detalle</td>
<td>string</td>
<td>Identifica de manera única el ítem o detalle de la factura. Si no hay un solo campo que lo identifique de manera única se debe usar la concatenación de varios.<strong>Requerido</strong></td>
</tr>
<tr>
<td>descripcion</td>
<td>string</td>
<td>Descripción del ítem. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_principal</td>
<td>string</td>
<td>Código alfanumérico de uso del comercio. Máximo 25 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_auxiliar</td>
<td>string</td>
<td>Código alfanumérico de uso del comercio. Máximo 25 caracteres.</td>
</tr>
<tr>
<td>cantidad</td>
<td>float</td>
<td>Cantidad de items. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="detalles-adicionales-de-items">Detalles adicionales de items</h3>

<p>Obtiene los detalles adicionales de un ítem. Este query es opcional.</p>

<p>Los detalles adicionales de un ítem se manejan de la forma &#39;Clave&rsquo;:&#39;Valor&rsquo;. Ejemplo: &#39;Peso&rsquo;:&#39;Kg&rsquo;</p>

<p>Se asume que en la tabla consultada
una columna tiene los nombres y otra los valores.</p>

<p>Ejemplo de columnas con detalles adicionales del ítem:</p>

<table><thead>
<tr>
<th>columna_de_nombres</th>
<th>columna_de_valores</th>
</tr>
</thead><tbody>
<tr>
<td>Peso</td>
<td>KG</td>
</tr>
<tr>
<td>Color</td>
<td>Rojo</td>
</tr>
<tr>
<td>Caducidad</td>
<td>10 días</td>
</tr>
</tbody></table>
<pre class="highlight sql"><code><span class="n">item_details</span> <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">columna_de_nombres</span>    <span class="n">_nombre_</span><span class="p">,</span>
  <span class="n">columna_de_valores</span>   <span class="n">_valor_</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoGuiaRemision</span><span class="p">.</span><span class="n">items_detalles_adicionales</span>
  <span class="k">WHERE</span>
  <span class="n">id_detalle</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>nombre</td>
<td>string</td>
<td>Nombre del detalle adicional del ítem</td>
</tr>
<tr>
<td>valor</td>
<td>string</td>
<td>Valor del detalle adicional del ítem</td>
</tr>
</tbody></table>

<h3 id="informaci-n-adicional">Información adicional</h3>

<p>Obtiene la información adicional de la guía de remisión.</p>

<p>La información adicional de la guía de remisión se maneja de la forma &#39;Clave&rsquo;:&#39;Valor&rsquo;. Ejemplo: &#39;Tipo de pago&rsquo;:&#39;Cheque&rsquo;</p>

<p>Se asume que en la tabla consultada
una columna tiene los nombres y otra los valores.</p>

<p>Ejemplo de columnas con información adicional de la guía de remisión:</p>

<table><thead>
<tr>
<th>columna_de_nombres</th>
<th>columna_de_valores</th>
</tr>
</thead><tbody>
<tr>
<td>Tipo de servicio</td>
<td>Avanzado</td>
</tr>
<tr>
<td>Forma de pago</td>
<td>Cheque</td>
</tr>
<tr>
<td>Periodo</td>
<td>3 meses</td>
</tr>
</tbody></table>
<pre class="highlight sql"><code><span class="n">waybill_additional_information</span> <span class="o">=</span> <span class="k">SELECT</span>
  <span class="n">columna_de_nombres</span>    <span class="n">_nombre_</span><span class="p">,</span>
  <span class="n">columna_de_valores</span>     <span class="n">_valor_</span>
  <span class="k">FROM</span>
  <span class="n">DocElectronicoRetencion</span><span class="p">.</span><span class="n">informacion_adicional</span>
  <span class="k">WHERE</span>
  <span class="n">id_retencion</span> <span class="o">=</span> <span class="o">?</span>
</code></pre>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">_nombre_</code></td>
<td>string</td>
<td>Nombre de la información adicional de la rentención</td>
</tr>
<tr>
<td><code class="prettyprint">_valor_</code></td>
<td>string</td>
<td>Valor de la información adicional de la retención</td>
</tr>
</tbody></table>

<h3 id="tablas-recomendadas">Tablas recomendadas</h3>

<p>Estructura recomendada para las tablas o vistas con información de la guía de remisión. </p>

<p>Ejemplo en SQL Server:</p>

<p>Pendiente</p>

<h1 id="actualizaci-n">Actualización</h1>

<p>Para actualizar el programa Link de Dátil</p>

<ul>
<li>Abra el terminal de windows y detenga el servicio:</li>
</ul>

<p><code class="prettyprint">net stop datilink</code></p>

<ul>
<li>Respalde la carpeta de configuración  <code class="prettyprint">config</code> </li>
</ul>

<p>Windows: <code class="prettyprint">C:\Archivos de Programa\Datil\Link\config</code> .</p>

<ul>
<li>Doble click en el desinstalador:</li>
</ul>

<p>Windows: <code class="prettyprint">C:\Archivos de Programa\Datil\Link\unins</code></p>

<p>Dentro del directorio de instalación solo debe quedar la carpeta <code class="prettyprint">logs</code>. Si otro
archivo o carpeta sigue existiendo, borrarlo.</p>

<ul>
<li><p>Instalar la nueva versión ejecutando el instalador de Link</p></li>
<li><p>Reemplazar la carpeta config recién instalada con la carpeta config respaldada previamente</p></li>
<li><p>Iniciar el servicio con el comando:</p></li>
</ul>

<p><code class="prettyprint">net start datilink</code></p>

          <h1 id="clave-de-acceso">Clave de acceso</h1>

<p>El sistema se encarga de generar automáticamente la clave de acceso de cada
comprobante y luego retornarla como parte de la respuesta de emisión del mismo.
Pero es posible también proveer la clave de acceso si se requiere tener control
en la generación de esta clave. La siguiente documentación explica como debe
estar estructurada la clave de acceso.</p>

<p>Las claves de acceso estarán compuestas de 49 caracteres numéricos, la herramienta o aplicativo a utilizar por el sujeto pasivo deberá generar de manera automática la clave de acceso, que constituirá un requisito que dará el carácter de único a cada uno de los comprobantes, y la misma servirá para que el SRI indique si el comprobante es autorizado o no; se describe a continuación su conformación:</p>

<table><thead>
<tr>
<th>Campo</th>
<th>Formato</th>
<th>Longitud</th>
</tr>
</thead><tbody>
<tr>
<td>Fecha de Emisión</td>
<td>ddmmaaaa</td>
<td>8</td>
</tr>
<tr>
<td>Tipo de Comprobante</td>
<td>Tabla 4</td>
<td>2</td>
</tr>
<tr>
<td>Número de RUC</td>
<td>1234567890001</td>
<td>13</td>
</tr>
<tr>
<td>Tipo de Ambiente</td>
<td>Tabla 5</td>
<td>1</td>
</tr>
<tr>
<td>Serie</td>
<td>001001</td>
<td>6</td>
</tr>
<tr>
<td>Número del Comprobante (secuencial)</td>
<td>000000001</td>
<td>9</td>
</tr>
<tr>
<td>Código Numérico</td>
<td>Numérico</td>
<td>8</td>
</tr>
<tr>
<td>Tipo de Emisión</td>
<td>Tabla 2</td>
<td>1</td>
</tr>
<tr>
<td>Dígito Verificador (módulo 11 )</td>
<td>Numérico</td>
<td>1</td>
</tr>
</tbody></table>

<p><strong>Nota:</strong> Todos los campos deben completarse conforme a la longitud indicada, es decir si en el número secuencial no completa los 9 dígitos, la clave de acceso estará mal conformada y será motivo de rechazo de la autorización en línea.</p>

<p>El dígito verificador será aplicado sobre toda la clave de acceso (48 dígitos) y deberá ser incorporado por el contribuyente a través del método denominado Módulo 11, con un factor de chequeo ponderado (2), este mecanismo de detección de errores, será verificado al momento de la recepción del comprobante. Cuando el resultado del dígito verificador obtenido sea igual a once (11), el digito verificador será el cero (0) y cuando el resultado del dígito verificador obtenido sea igual a diez 10, el digito verificador será el uno (1).</p>

<p>El código numérico constituye un mecanismo para brindar seguridad al emisor en cada comprobante emitido, el algoritmo numérico para conformar este código es potestad absoluta del contribuyente emisor.</p>

<p>Ver <a href="https://es.wikipedia.org/wiki/C%C3%B3digo_de_control">aquí</a> ejemplo de verificación utilizando algoritmo de módulo 11.</p>

<h1 id="objetos-comunes">Objetos comunes</h1>

<h2 id="emisor">Emisor</h2>

<p>Información del emisor de un comprobante.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>ruc</td>
<td>string</td>
<td>Número de RUC de 13 caracteres</td>
</tr>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social. Máximo 300 caracteres</td>
</tr>
<tr>
<td>nombre_comercial</td>
<td>string</td>
<td>Nombre comercial. Máximo 300 caracteres</td>
</tr>
<tr>
<td>direccion</td>
<td>string</td>
<td>Dirección registrada en el SRI. Máximo 300 caracteres.</td>
</tr>
<tr>
<td>contribuyente_especial</td>
<td>string</td>
<td>Número de resolución. En blanco si no es contribuyente especial.</td>
</tr>
<tr>
<td>obligado_contabilidad</td>
<td>boolean</td>
<td><code class="prettyprint">true</code> si está obligado a llevar contabilidad.</td>
</tr>
<tr>
<td>establecimiento</td>
<td><a href="#establecimiento">establecimiento</a></td>
<td>Establecimiento que emite la factura.</td>
</tr>
</tbody></table>

<h2 id="establecimiento">Establecimiento</h2>

<p>Representa un establecimiento del comercio.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código numérico de 3 caracteres que representa al establecimiento. Ejemplo: <code class="prettyprint">001</code></td>
</tr>
<tr>
<td>direccion</td>
<td>string</td>
<td>Dirección registrada en el SRI. Máximo 300 caracteres</td>
</tr>
<tr>
<td>punto_emision</td>
<td>string</td>
<td>Código numérico de 3 caracteres que representa al punto de emisión, o punto de venta. Ejemplo: <code class="prettyprint">001</code></td>
</tr>
</tbody></table>

<h2 id="persona">Persona</h2>

<p>Datos de una persona. Utilizado como <strong>comprador</strong> en facturas y notas de crédito, como <strong>sujeto</strong> en retenciones</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>identificacion</td>
<td>string</td>
<td>De 5 a 20 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_identificacion</td>
<td>string</td>
<td>Ver <a href="#tipo-de-identificación">tabla</a> de tipos de identificación <strong>Requerido</strong></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Correo electrónico. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>telefono</td>
<td>string</td>
<td>Teléfono.</td>
</tr>
<tr>
<td>direccion</td>
<td>string</td>
<td>Dirección</td>
</tr>
</tbody></table>

<h2 id="tipo-de-identificaci-n">Tipo de identificación</h2>

<table><thead>
<tr>
<th>Tipo de identificación</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>RUC</td>
<td><code class="prettyprint">04</code></td>
</tr>
<tr>
<td>CEDULA</td>
<td><code class="prettyprint">05</code></td>
</tr>
<tr>
<td>PASAPORTE</td>
<td><code class="prettyprint">06</code></td>
</tr>
<tr>
<td>VENTA A CONSUMIDOR FINAL*</td>
<td><code class="prettyprint">07</code></td>
</tr>
<tr>
<td>IDENTIFICACION DELEXTERIOR*</td>
<td><code class="prettyprint">08</code></td>
</tr>
<tr>
<td>PLACA</td>
<td><code class="prettyprint">09</code></td>
</tr>
</tbody></table>

<h2 id="total-impuesto">Total Impuesto</h2>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código del <a href="#tipos-de-impuesto">tipo de impuesto</a></td>
</tr>
<tr>
<td>codigo_porcentaje</td>
<td>string</td>
<td>Código del <a href="#c-digo-de-porcentaje-de-iva">porcentaje</a>.</td>
</tr>
<tr>
<td>base_imponible</td>
<td>float</td>
<td>Base imponible.</td>
</tr>
<tr>
<td>valor</td>
<td>float</td>
<td>Valor del total.</td>
</tr>
</tbody></table>

<h2 id="impuesto-item">Impuesto Item</h2>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código del <a href="#tipos-de-impuesto">tipo de impuesto</a></td>
</tr>
<tr>
<td>codigo_porcentaje</td>
<td>string</td>
<td>Código del <a href="#c-digo-de-porcentaje-de-iva">porcentaje</a>.</td>
</tr>
<tr>
<td>base_imponible</td>
<td>float</td>
<td>Base imponible.</td>
</tr>
<tr>
<td>valor</td>
<td>float</td>
<td>Valor del total.</td>
</tr>
<tr>
<td>tarifa</td>
<td>float</td>
<td>Porcentaje actual del impuesto expresado por un número entre 0.0 y 100.0</td>
</tr>
</tbody></table>

<h2 id="env-o-sri">Envío SRI</h2>

<p>Contiene la información y el estado de la fase de envío al SRI</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>mensajes</td>
<td>listado de objeto <a href="#mensajes-de-respuesta-sri">mensaje SRI</a></td>
<td>Listado de mensajes.</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Posibles valores: <code class="prettyprint">RECIBIDA</code>, <code class="prettyprint">DEVUELTA</code></td>
</tr>
<tr>
<td>fecha</td>
<td>string</td>
<td>Fecha en la que se realizó el envío en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
</tbody></table>

<h2 id="autorizaci-n-sri">Autorización SRI</h2>

<p>Contiene la información y el estado de la fase de autorización del comprobante.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>mensajes</td>
<td>listado de objeto <a href="#mensajes-de-respuesta-sri">mensaje SRI</a></td>
<td>Listado de mensajes.</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Posibles valores: <code class="prettyprint">AUTORIZADO</code>, <code class="prettyprint">NO AUTORIZADO</code></td>
</tr>
<tr>
<td>numero</td>
<td>string</td>
<td>Número de autorización.</td>
</tr>
<tr>
<td>fecha</td>
<td>string</td>
<td>Fecha en la que se otorgó la autorización en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
</tbody></table>

<h2 id="mensajes-de-respuesta-sri">Mensajes de respuesta SRI</h2>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>identificador</td>
<td>string</td>
<td>Número con el que el SRI identifica al mensaje.</td>
</tr>
<tr>
<td>mensaje</td>
<td>string</td>
<td>Descripción del error, información o advertencia.</td>
</tr>
<tr>
<td>tipo</td>
<td>string</td>
<td>Posibles valores: <code class="prettyprint">INFORMATIVO</code>, <code class="prettyprint">ADVERTENCIA</code>, <code class="prettyprint">ERROR</code></td>
</tr>
<tr>
<td>informacion_adicional</td>
<td>string</td>
<td>Información adicional del mensaje.</td>
</tr>
</tbody></table>

<h2 id="item-de-factura">Item de factura y nota de crédito</h2>

<p>Representa un producto o servicio del comercio.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>descripcion</td>
<td>string</td>
<td>Descripción del ítem. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_principal</td>
<td>string</td>
<td>Código alfanumérico de uso del comercio. Máximo 25 caracteres.</td>
</tr>
<tr>
<td>codigo_auxiliar</td>
<td>string</td>
<td>Código alfanumérico de uso del comercio. Máximo 25 caracteres.</td>
</tr>
<tr>
<td>cantidad</td>
<td>float</td>
<td>Cantidad de items. <strong>Requerido</strong></td>
</tr>
<tr>
<td>precio_unitario</td>
<td>float</td>
<td>Precio unitario. <strong>Requerido</strong></td>
</tr>
<tr>
<td>descuento</td>
<td>float</td>
<td>El descuento es aplicado por cada producto, expresado en valor monetario. <strong>Requerido</strong></td>
</tr>
<tr>
<td>precio_total_sin_impuestos</td>
<td>float</td>
<td>Precio antes de los impuestos. Se obtiene multiplicando la <code class="prettyprint">cantidad</code> por el <code class="prettyprint">precio_unitario</code></td>
</tr>
<tr>
<td>impuestos</td>
<td>listado de objetos tipo <a href="#impuesto-item">impuesto item</a></td>
<td>Impuestos grabados sobre el producto. <strong>Requerido</strong></td>
</tr>
<tr>
<td>detalles_adicionales</td>
<td>object</td>
<td>Diccionario de datos de carácter adicional. Ejemplo:<br><code>{&quot;marca&quot;: &quot;Ferrari&quot;, &quot;chasis&quot;: &quot;UANEI832-NAU101&quot;}</code></td>
</tr>
</tbody></table>

<h2 id="retencion-de-factura">Retención en factura </h2>

<p>Caso específico de Retenciones en la Comercializadores / Distribuidores de derivados del Petróleo y Retención presuntiva de IVA a los Editores, Distribuidores y Voceadores que participan en la comercialización de periódicos y/o revistas.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código del <a href="#tipos-de-impuesto-para-la-retención-en-la-factura">tipo de impuesto para la retención en la factura</a>.  <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_porcentaje</td>
<td>string</td>
<td>Código del <a href="#retención-de-iva-presuntivo-y-renta">porcentaje del impuesto</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tarifa</td>
<td>float</td>
<td>Porcentaje actual del impuesto. Máximo 3 enteros y 2 decimales.  <strong>Requerido</strong></td>
</tr>
<tr>
<td>valor</td>
<td>float</td>
<td>Valor del impuesto. Máximo 12 enteros y 2 decimales.  <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h1 id="cat-logo">Catálogo</h1>

<h2 id="tipos-de-impuesto">Tipos de impuesto</h2>

<table><thead>
<tr>
<th>Impuesto</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>IVA</td>
<td>2</td>
</tr>
<tr>
<td>ICE</td>
<td>3</td>
</tr>
<tr>
<td>IRBPNR</td>
<td>5</td>
</tr>
</tbody></table>

<h2 id="c-digo-de-porcentaje-de-iva">Código de Porcentaje de IVA</h2>

<table><thead>
<tr>
<th>Porcentaje de IVA</th>
<th>Código</th>
<th>Tarifa</th>
</tr>
</thead><tbody>
<tr>
<td>0%</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>12%</td>
<td>2</td>
<td>12</td>
</tr>
<tr>
<td>14%</td>
<td>3</td>
<td>14</td>
</tr>
<tr>
<td>No Objeto de Impuesto</td>
<td>6</td>
<td>-</td>
</tr>
<tr>
<td>Exento de IVA</td>
<td>7</td>
<td>-</td>
</tr>
</tbody></table>

<h2 id="tipos-de-impuesto-para-la-retenci-n">Tipos de impuesto para la retención</h2>

<table><thead>
<tr>
<th>Impuesto</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>RENTA</td>
<td>1</td>
</tr>
<tr>
<td>IVA</td>
<td>2</td>
</tr>
<tr>
<td>ISD</td>
<td>6</td>
</tr>
</tbody></table>

<h2 id="tipos-de-impuesto-para-la-retenci-n-en-la-factura">Tipos de impuesto para la retención en la factura</h2>

<p>Caso específico de Retenciones en la Comercializadores / Distribuidores de derivados del
Petróleo y Retención presuntiva de IVA a los Editores, Distribuidores y Voceadores que
participan en la comercialización de periódicos y/o revistas.</p>

<table><thead>
<tr>
<th>Impuesto</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>IVA PRESUNTIVO Y RENTA</td>
<td>4</td>
</tr>
</tbody></table>

<h2 id="retenci-n-de-iva">Retención de IVA</h2>

<table><thead>
<tr>
<th>Porcentaje IVA</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>10%</td>
<td>9</td>
</tr>
<tr>
<td>20%</td>
<td>10</td>
</tr>
<tr>
<td>30%</td>
<td>1</td>
</tr>
<tr>
<td>70%</td>
<td>2</td>
</tr>
<tr>
<td>100%</td>
<td>3</td>
</tr>
</tbody></table>

<p><strong>Retención en cero</strong></p>

<table><thead>
<tr>
<th>Porcentaje IVA</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>0%</td>
<td>7</td>
</tr>
</tbody></table>

<p><strong>No procede retención</strong></p>

<table><thead>
<tr>
<th>Porcentaje IVA</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>0%</td>
<td>8</td>
</tr>
</tbody></table>

<h2 id="retenci-n-isd">Retención ISD</h2>

<table><thead>
<tr>
<th>Porcentaje IVA</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>5%</td>
<td>4580</td>
</tr>
</tbody></table>

<h2 id="retenci-n-de-iva-presuntivo-y-renta">Retención de IVA Presuntivo y Renta</h2>

<p>Caso específico de Retenciones en la Comercializadores / Distribuidores de derivados del
Petróleo y Retención presuntiva de IVA a los Editores, Distribuidores y Voceadores que
participan en la comercialización de periódicos y/o revistas.</p>

<p><strong>Retención IVA</strong></p>

<table><thead>
<tr>
<th>Porcentaje IVA presuntivo</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>100%</td>
<td>3</td>
</tr>
<tr>
<td>12%  (Editores a Margen de Comercialización Voceadores)</td>
<td>4</td>
</tr>
<tr>
<td>100% (Venta periódicos y/o Revistas a Distribuidores)</td>
<td>5</td>
</tr>
<tr>
<td>100% (Venta periódicos y/o Revistas a Voceadores)</td>
<td>6</td>
</tr>
</tbody></table>

<p><strong>Retención Renta</strong></p>

<table><thead>
<tr>
<th>Porcentaje Renta</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>0.2%</td>
<td>327</td>
</tr>
<tr>
<td>0.3%</td>
<td>328</td>
</tr>
</tbody></table>

<h2 id="tipos-de-documentos">Tipos de documentos</h2>

<table><thead>
<tr>
<th>Documento</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>Factura</td>
<td>01</td>
</tr>
<tr>
<td>Nota de Crédito</td>
<td>04</td>
</tr>
<tr>
<td>Nota de Débito</td>
<td>05</td>
</tr>
<tr>
<td>Guía de Remisión</td>
<td>06</td>
</tr>
<tr>
<td>Comprobante de Retención</td>
<td>07</td>
</tr>
</tbody></table>

<h2 id="tipos-de-forma-de-pago">Tipos de forma de pago</h2>

<table><thead>
<tr>
<th>Forma de pago</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>Efectivo</td>
<td>efectivo</td>
</tr>
<tr>
<td>Cheque</td>
<td>cheque</td>
</tr>
<tr>
<td>Cheque certificado</td>
<td>cheque_certificado</td>
</tr>
<tr>
<td>Cheque de gerencia</td>
<td>cheque_gerencia</td>
</tr>
<tr>
<td>Cheque del exterior</td>
<td>cheque_exterior</td>
</tr>
<tr>
<td>Débito de cuenta bancaria</td>
<td>debito_cuenta_bancaria</td>
</tr>
<tr>
<td>Transferencia en el mismo banco</td>
<td>transferencia_mismo_banco</td>
</tr>
<tr>
<td>Transferencia otro banco nacional</td>
<td>transferencia_otro_banco</td>
</tr>
<tr>
<td>Transferencia banco exterior</td>
<td>transferencia_banco_exterior</td>
</tr>
<tr>
<td>Tarjeta de crédito nacional</td>
<td>tarjeta_credito_nacional</td>
</tr>
<tr>
<td>Tarjeta de crédito internacional</td>
<td>tarjeta_credito_internacional</td>
</tr>
<tr>
<td>Giro</td>
<td>giro</td>
</tr>
<tr>
<td>Depósito en cuenta (Corriente / Ahorros)</td>
<td>deposito_cuenta_bancaria</td>
</tr>
<tr>
<td>Endoso de inversión</td>
<td>endoso_inversion</td>
</tr>
<tr>
<td>Compensación de deudas</td>
<td>compensacion_deudas</td>
</tr>
<tr>
<td>Tarjeta de débito</td>
<td>tarjeta_debito</td>
</tr>
<tr>
<td>Dinero electrónico Ecuador</td>
<td>dinero_electronico_ec</td>
</tr>
<tr>
<td>Tarjeta prepago</td>
<td>tarjeta_prepago</td>
</tr>
<tr>
<td>Tarjeta de crédito</td>
<td>tarjeta_credito</td>
</tr>
<tr>
<td>Otros</td>
<td>otros</td>
</tr>
<tr>
<td>Endoso de títulos</td>
<td>endoso_titulos</td>
</tr>
</tbody></table>

<h2 id="equivalencia-entre-formas-de-pago-d-til-y-formas-de-pago-del-sri">Equivalencia entre formas de pago Dátil y formas de pago del SRI</h2>

<table><thead>
<tr>
<th>Forma de pago Dátil</th>
<th>Código</th>
<th>Forma de pago SRI</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>Efectivo</td>
<td>efectivo</td>
<td>Fuera del sistema financiero</td>
<td>01</td>
</tr>
<tr>
<td>Cheque</td>
<td>cheque</td>
<td>Cheque propio</td>
<td>02</td>
</tr>
<tr>
<td>Cheque certificado</td>
<td>cheque_certificado</td>
<td>Cheque certificado</td>
<td>03</td>
</tr>
<tr>
<td>Cheque de gerencia</td>
<td>cheque_gerencia</td>
<td>Cheque de gerencia</td>
<td>04</td>
</tr>
<tr>
<td>Cheque del exterior</td>
<td>cheque_exterior</td>
<td>Cheque del exterior</td>
<td>05</td>
</tr>
<tr>
<td>Débito de cuenta bancaria</td>
<td>debito_cuenta_bancaria</td>
<td>Débito de cuenta</td>
<td>06</td>
</tr>
<tr>
<td>Transferencia en el mismo banco</td>
<td>transferencia_mismo_banco</td>
<td>Transferencia propio banco</td>
<td>07</td>
</tr>
<tr>
<td>Transferencia otro banco nacional</td>
<td>transferencia_otro_banco</td>
<td>Transferencia otro banco nacional</td>
<td>08</td>
</tr>
<tr>
<td>Transferencia banco exterior</td>
<td>transferencia_banco_exterior</td>
<td>Transferencia banco exterior</td>
<td>09</td>
</tr>
<tr>
<td>Tarjeta de crédito nacional</td>
<td>tarjeta_credito_nacional</td>
<td>Tarjeta de crédito nacional</td>
<td>10</td>
</tr>
<tr>
<td>Tarjeta de crédito internacional</td>
<td>tarjeta_credito_internacional</td>
<td>Tarjeta de crédito internacional</td>
<td>11</td>
</tr>
<tr>
<td>Giro</td>
<td>giro</td>
<td>Giro</td>
<td>12</td>
</tr>
<tr>
<td>Depósito en cuenta (Corriente / Ahorros)</td>
<td>deposito_cuenta_bancaria</td>
<td>Depósito en cuenta (Corriente / Ahorros)</td>
<td>13</td>
</tr>
<tr>
<td>Endoso de inversión</td>
<td>endoso_inversion</td>
<td>Endoso de inversión</td>
<td>14</td>
</tr>
<tr>
<td>Compensación de deudas</td>
<td>compensacion_deudas</td>
<td>Compensación de deudas</td>
<td>15</td>
</tr>
<tr>
<td>Tarjeta de débito</td>
<td>tarjeta_debito</td>
<td>Tarjeta de débito</td>
<td>16</td>
</tr>
<tr>
<td>Dinero electrónico Ecuador</td>
<td>dinero_electronico_ec</td>
<td>Dinero electrónico</td>
<td>17</td>
</tr>
<tr>
<td>Tarjeta prepago</td>
<td>tarjeta_prepago</td>
<td>Tarjeta prepago</td>
<td>18</td>
</tr>
<tr>
<td>Tarjeta de crédito</td>
<td>tarjeta_credito</td>
<td>Tarjeta de crédito</td>
<td>19</td>
</tr>
<tr>
<td>Otros</td>
<td>otros</td>
<td>Otros con utilización del sistema financiero</td>
<td>20</td>
</tr>
<tr>
<td>Endoso de títulos</td>
<td>endoso_titulos</td>
<td>Endoso de títulos</td>
<td>21</td>
</tr>
</tbody></table>

<p>Debido a que el Servicio de Rentas Internas exige incluir información del pago,
las facturas a crédito se enviarán al SRI con forma de pago &ldquo;Fuera del sistema financiero&rdquo;.</p>

          <h1 id="ejemplos-de-archivos-de-configuraci-n">Ejemplos de archivos de configuración</h1>

<h2 id="invoice-ini">invoice.ini</h2>

<p>Guarda la configuración y queries para la extracción y emisisón electrónica de facturas.
<pre></p>

<p>[Query]
headers = SELECT
  id_factura            id_local,
  secuencial,
  fecha_emision,
  guia_remision,
  moneda,
  clave_acceso,
  tipo_emision
  FROM
  DocElectronicoFactura.cabecera
  WHERE
  info.id_factura in (:sequence)
  ORDER BY id_factura :order</p>

<p>invoice_seller  = SELECT
  ruc,
  obligado_contabilidad,
  contribuyente_especial,
  nombre_comercial,
  razon_social,
  direccion_establecimiento,
  direccion_emisor,
  codigo,
  punto_emision
  FROM
  DocElectronicoFactura.cabecera
  WHERE
  id_factura = ?</p>

<p>invoice_buyer  = SELECT
  identificacion,
  tipo_identificacion,
  razon_social,
  direccion,
  email,
  telefono
  FROM
  FROM
  DocElectronicoFactura.cabecera
  WHERE
  id_factura = ?</p>

<p>invoice_totals  = SELECT
  total_sin_impuestos,
  importe_total,
  propina,
  descuento
  FROM
  DocElectronicoFactura.cabecera
  WHERE
  id_factura = ?</p>

<p>invoice_totals_taxes  = SELECT
  codigo,
  codigo_porcentaje,
  base_imponible,
  valor
  FROM
  DocElectronicoFactura.totales_impuestos
  WHERE
  id_factura = ?</p>

<p>items  = SELECT
  id_detalle,
  codigo_principal,
  codigo_auxiliar,
  descripcion,
  cantidad,
  precio_unitario,
  descuento,
  precio_total_sin_impuestos
  FROM
  DocElectronicoFactura.items
  WHERE
  id_factura = ?</p>

<p>item_taxes  = SELECT
  base_imponible,
  valor,
  tarifa,
  codigo,
  codigo_porcentaje
  FROM
  DocElectronicoFactura.items_impuestos
  WHERE
  id_detalle = ?</p>

<p>item_details = SELECT
  nombre    nombre,
  valor   valor
  FROM
  DocElectronicoFactura.items_detalles_adicionales
  WHERE
  id_detalle = ?</p>

<p>invoice_additional_information = SELECT
  columna_de_nombres    <em>nombre</em>,
  columna_de_valores     <em>valor</em>
  FROM
  DocElectronicoFactura.informacion_adicional
  WHERE
  id_detalle = ?
</pre></p>

<h2 id="credit_note-ini">credit_note.ini</h2>

<p>Guarda la configuración y queries para la extracción y emisisón electrónica de notas de crédito.
<pre></p>

<p>[Query]
headers = SELECT
  id_nota_credito            id_local,
  secuencial,
  fecha_emision,
  guia_remision,
  moneda,
  clave_acceso,
  tipo_emision,
  fecha_emision_documento_modificado,
  numero_documento_modificado,
  tipo_documento_modificado,
  motivo
  FROM
  DocElectronicoNotaCredito.cabecera
  WHERE
  info.id_nota_credito in (:sequence)
  ORDER BY id_nota_credito :order</p>

<p>credit_note_seller  = SELECT
  ruc,
  obligado_contabilidad,
  contribuyente_especial,
  nombre_comercial,
  razon_social,
  direccion_establecimiento,
  direccion_emisor,
  codigo,
  punto_emision
  FROM
  DocElectronicoNotaCredito.cabecera
  WHERE
  id_nota_credito = ?</p>

<p>credit_note_buyer  = SELECT
  identificacion,
  tipo_identificacion,
  razon_social,
  direccion,
  email,
  telefono
  FROM
  DocElectronicoNotaCredito.cabecera
  WHERE
  id_nota_credito = ?</p>

<p>credit_note_totals  = SELECT
  total_sin_impuestos,
  importe_total
  FROM
  DocElectronicoNotaCredito.cabecera
  WHERE
  id_nota_credito = ?</p>

<p>credit_note_totals_taxes  = SELECT
  codigo,
  codigo_porcentaje,
  base_imponible,
  valor
  FROM
  DocElectronicoNotaCredito.totales_impuestos
  WHERE
  id_nota_credito = ?</p>

<p>items  = SELECT
  id_detalle,
  codigo_principal,
  codigo_auxiliar,
  descripcion,
  cantidad,
  precio_unitario,
  descuento,
  precio_total_sin_impuestos
  FROM
  DocElectronicoNotaCredito.items
  WHERE
  id_nota_credito = ?</p>

<p>item_taxes  = SELECT
  base_imponible,
  valor,
  tarifa,
  codigo,
  codigo_porcentaje
  FROM
  DocElectronicoNotaCredito.items_impuestos
  WHERE
  id_detalle = ?</p>

<p>item_details = SELECT
  nombre    nombre,
  valor   valor
  FROM
  DocElectronicoNotaCredito.items_detalles_adicionales
  WHERE
  id_detalle = ?</p>

<p>credit_note_additional_information = SELECT
  columna_de_nombres    <em>nombre</em>,
  columna_de_valores     <em>valor</em>
  FROM
  DocElectronicoNotaCredito.informacion_adicional
  WHERE
  id_detalle = ?
</pre></p>

<h2 id="retention-ini">retention.ini</h2>

<p>Guarda la configuración y queries para la extracción y emisisón electrónica de retenciones.
<pre></p>

<p>[Query]
headers = SELECT
  id_nota_credito             id_local,
  secuencial,
  fecha_emision,
  clave_acceso,
  tipo_emision,
  periodo_fiscal
  FROM
  DocElectronicoRetencion.cabecera
  WHERE
  id_retencion in (:sequence)
  ORDER BY id_retencion :order</p>

<p>retention_seller  = SELECT
  ruc,
  obligado_contabilidad,
  contribuyente_especial,
  nombre_comercial,
  razon_social,
  direccion_establecimiento,
  direccion_emisor,
  codigo,
  punto_emision
  FROM
  DocElectronicoRetencion.cabecera
  WHERE
  id_retencion = ?</p>

<p>retention_recipient  = SELECT
  identificacion,
  tipo_identificacion,
  razon_social,
  direccion,
  email,
  telefono
  FROM
  DocElectronicoRetencion.cabecera
  WHERE
  id_retencion = ?</p>

<p>retention_taxes  = SELECT
    codigo,
    codigo_porcentaje,
    porcentaje,
    base_imponible,
    valor_retenido,
    tipo_documento_sustento,
    numero_documento_sustento,
    fecha_emision_documento_sustento
    FROM 
    DocElectronicoRetencion.impuesto
    WHERE
    id_retencion = ?</p>

<p>retention_additional_information = SELECT
  columna_de_nombres    <em>nombre</em>,
  columna_de_valores     <em>valor</em>
  FROM
  DocElectronicoRetencion.informacion_adicional
  WHERE
  id_retencion = ?
</pre></p>

<h2 id="waybill-ini">waybill.ini</h2>

<p>Guarda la configuración y queries para la extracción y emisisón electrónica de guías de remisión.
<pre></p>

<p>[Query]
headers = SELECT
  id_guia_remision             id_local,
  secuencial,
  fecha_inicio_transporte,
  fecha_fin_transporte,
  direccion_partida,
  clave_acceso,
  tipo_emision
  FROM
  DocElectronicoGuiaRemision.cabecera
  WHERE
  id_guia_remision in (:sequence)
  ORDER BY id_guia_remision :order</p>

<p>waybill_seller  = SELECT
  ruc,
  obligado_contabilidad,
  contribuyente_especial,
  nombre_comercial,
  razon_social,
  direccion_establecimiento,
  direccion_emisor,
  codigo,
  punto_emision
  FROM
  DocElectronicoGuiaRemision.cabecera
  WHERE
  id_guia_remision = ?</p>

<p>waybill_shipper  = SELECT
  identificacion,
  tipo_identificacion,
  razon_social,
  direccion,
  email,
  telefono
  FROM
  DocElectronicoGuiaRemision.cabecera
  WHERE
  id_guia_remision = ?</p>

<p>waybill_receivers  = SELECT
    id_destinatario     receiver_id,
    razon_social,
    identificacion,
    tipo_identificacion,
    email,
    telefono,
    direccion,
    ruta,
    documento_aduanero_unico,
    codigo_establecimiento_destino,
    fecha_emision_documento_sustento,
    numero_documento_sustento,
    tipo_documento_sustento,
    motivo_traslado,
    numero_autorizacion_documento_sustento
    FROM
    DocElectronicoGuiaRemision.destinatario
    WHERE
    id_guia_remision = ?</p>

<p>waybill_receiver_items = SELECT
    id_detalle,
    descripcion,
    codigo_principal,
    codigo_auxiliar,
    cantidad
    FROM
    DocElectronicoGuiaRemision.detalle
    WHERE
    id_destinatario = ?</p>

<p>item_details = SELECT
  columna_de_nombres    <em>nombre</em>,
  columna_de_valores   <em>valor</em>
  FROM
  DocElectronicoGuiaRemision.items_detalles_adicionales
  WHERE
  id_detalle = ?</p>

<p>waybill_additional_information = SELECT
  columna_de_nombres    <em>nombre</em>,
  columna_de_valores     <em>valor</em>
  FROM
  DocElectronicoRetencion.informacion_adicional
  WHERE
  id_retencion = ?</p>

<p></pre></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="sql">Ejemplo SQL</a>
          </div>
      </div>
    </div>
  </body>
</html>
